import{j as e}from"./mui-Bss3QQll.js";import{A as u}from"./AuthLayout-3EJfzjkv.js";import{b as d,s as p,n as y,d as x}from"./form-tools-C_3viVMX.js";import{a as f,u as c,F as h,b as g,c as j,d as S,I as v,e as b,B as F,L as K,t as k}from"./index-CNItTNil.js";import{u as l,i as N}from"./state-management-7spMuoR3.js";import{r as L,f as _,L as I}from"./react-core-spor8t4e.js";import{u as w}from"./data-utils-CsUIpaiA.js";import"./ui-utils-D3kZWK2d.js";import"./radix-B4zV8Utj.js";const A=()=>{const n=L.useMemo(()=>o=>o.auth.role_name,[]),t=l(n);console.log(t),N();const s=_(),{mutate:a,isPending:i,error:r}=w({mutationFn:f.SecretKeyUser,onSuccess:o=>{console.log(o);const m=o;console.log(o),m.valid?(c.success("Secret key is valid"),t=="User"?s("/client/workspaces"):t=="Admin"?s("/admin-dashboard/users/viewall"):s("/login")):c.error("Invalid Secret key")},onError:o=>{c.error("Invalid Secret key")}});return{mutate:a,isLoading:i,error:r}},U=d({user_id:y().int({message:"User ID must be an integer"}),secret_key:p().min(1,"Secret Key is required")}),B=()=>{const{mutate:n,isLoading:t}=A(),s=l(r=>r.auth);console.log(s);const a=x({resolver:k(U),defaultValues:{user_id:s==null?void 0:s.user_id,secret_key:""}}),i=r=>{n(r)};return e.jsx(h,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(i),className:"space-y-6",children:[e.jsx(g,{control:a.control,name:"secret_key",render:({field:r})=>e.jsxs(j,{children:[e.jsx(S,{children:e.jsx("div",{className:"relative",children:e.jsx(v,{...r,type:"text",placeholder:"Secret Key*",autoComplete:"off",className:"rounded-full"})})}),e.jsx(b,{})]})}),e.jsx(F,{type:"submit",disabled:t,className:"w-full  rounded-full bg-[#43996A]",children:t?e.jsxs(e.Fragment,{children:[e.jsx(K,{className:"mr-2 h-4 w-4 animate-spin"}),"Please wait"]}):"Validate Secret Key"}),e.jsx("div",{className:"text-center",children:e.jsx(I,{to:"/login",className:"text-sm font-normal font-secondary text-[#062393] hover:text-primary transition-colors",children:"Back to login"})})]})})},z=()=>e.jsx(u,{title:"SecretKey",children:e.jsx(B,{})});export{z as default};
//# sourceMappingURL=SecretKeyPage-BNr7_p0l.js.map
