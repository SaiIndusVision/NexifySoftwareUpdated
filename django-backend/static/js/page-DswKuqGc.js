import{j as e,n as k,F as P,p as T,q as D,S as $,g as E,D as q,r as G,R as B,t as Y,v as H,w as J,x as K,C as Q,y as X,I as Z}from"./mui-Bss3QQll.js";import{r as y,h as ee,u as se}from"./react-core-spor8t4e.js";import{z as g,u as v,C as f,g as re,d as ae}from"./form-tools-C_3viVMX.js";import{h as O,g as _,v as L,m as U,E as te,j as ne,t as le,b as oe,c as ce,d as ie,P as ue,e as de}from"./index-CNItTNil.js";import{u as me,a as he,F as xe,S as pe}from"./useUserUpdate-CN3eCDIC.js";import{E as be}from"./eye-off-DYV2rxpG.js";import"./state-management-7spMuoR3.js";import"./ui-utils-D3kZWK2d.js";import"./radix-B4zV8Utj.js";import"./data-utils-CsUIpaiA.js";import"./userApi-BqluZRjZ.js";/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],A=O("CircleCheck",je);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],R=O("Circle",ge);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],fe=O("Upload",ve),Ce=g.object({first_name:g.string().min(1,"First name is required"),last_name:g.string().min(1,"Last name is required"),email:g.string().email("Invalid email format"),phone_number:g.string().min(10,"Phone number must be at least 10 digits").max(15,"Phone number must be no more than 15 digits"),mac_address:g.string().optional().or(g.literal(null)).or(g.string().length(0)),role_id:g.coerce.number().min(1,"Invalid role selected"),started_on:g.string().regex(/^\d{4}-\d{2}-\d{2}$/,"Start date must be in YYYY-MM-DD format")}),ye={fields:{email:{label:"Email",type:"email",required:!0,placeholder:"Enter Email"}}},_e=({name:s,label:r,baseStyle:a,className:o,uppercase:c,disabled:t=!1,required:h=!1,forcedValue:x,error:n})=>{const{control:d}=v();return e.jsx(e.Fragment,{children:e.jsx(f,{name:s,control:d,defaultValue:"",render:({field:l,fieldState:{error:i}})=>e.jsx(k,{...l,value:x||l.value||"",label:r,error:!!i,helperText:i==null?void 0:i.message,disabled:t,required:h,onChange:p=>{const b=c?p.target.value.toUpperCase():p.target.value;l.onChange(b)},sx:a,className:_(o)})})})};var z=function(s){var r=s.as,a=s.errors,o=s.name,c=s.message,t=s.render,h=function(p,b){if(p==null)return{};var u,m,j={},C=Object.keys(p);for(m=0;m<C.length;m++)b.indexOf(u=C[m])>=0||(j[u]=p[u]);return j}(s,["as","errors","name","message","render"]),x=v(),n=re(a||x.formState.errors,o);if(!n)return null;var d=n.message,l=n.types,i=Object.assign({},h,{children:d||c});return y.isValidElement(r)?y.cloneElement(r,i):t?t({message:d||c,messages:l}):y.createElement(r||y.Fragment,i)};const V=({name:s})=>e.jsxs(e.Fragment,{children:[e.jsx(z,{name:s,as:e.jsx(P,{error:!0})}),e.jsx(z,{name:`${s}.root`,as:e.jsx(P,{error:!0})})]}),Me=({name:s,label:r,options:a,baseStyle:o,className:c,placeholder:t})=>{const{control:h}=v(),x=Array.isArray(a),d=(()=>{if(x){const l=a.find(i=>i.selected);return l?l.value:""}else{const i=Object.entries(a).find(([p,{selected:b}])=>b);return i?i[0]:""}})();return e.jsxs(e.Fragment,{children:[e.jsx(f,{name:s,control:h,defaultValue:d,render:({field:{value:l,onChange:i,...p},fieldState:{error:b}})=>e.jsxs(T,{fullWidth:!0,error:!!b,children:[e.jsx(D,{children:r}),e.jsxs($,{...p,value:l||"",onChange:u=>{i(u.target.value)},label:r,sx:o,className:_(c),renderValue:u=>{if(!u||u==="")return e.jsx("em",{children:t});const m=j=>{var C;if(x){const N=a.find(W=>W.value===j);return(N==null?void 0:N.label)??j}else return((C=a==null?void 0:a[j])==null?void 0:C.label)??j};return Array.isArray(u)?L(u.map(m).join(", ")):L(m(String(u)))},children:[e.jsx(E,{disabled:!0,value:"",children:e.jsx("em",{children:t})}),x?a.map(u=>e.jsx(E,{value:u.value,children:u.label},u.value)):Object.entries(a).map(([u,{label:m}])=>e.jsx(E,{value:u,children:m},u))]})]})}),e.jsx(V,{name:s})]})},Ne=({name:s,label:r,baseStyle:a,className:o,error:c})=>{const{control:t,clearErrors:h}=v(),x={...a,...c&&{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"hsl(var(--destructive))"}}}};return e.jsx("div",{className:"flex flex-col w-full",children:e.jsx(f,{name:s,control:t,render:({field:n,fieldState:d})=>{var l;return e.jsx(q,{...n,label:r,value:n.value?U(n.value):null,onChange:i=>{n.onChange(i?U(i).format("YYYY-MM-DD"):""),i&&h(s)},slotProps:{textField:{error:!!d.error,helperText:(l=d.error)==null?void 0:l.message,sx:x,...o&&{className:o}}}})}})})},Se=({name:s,label:r,options:a})=>e.jsxs(T,{component:"fieldset",children:[e.jsx(G,{component:"legend",children:r}),e.jsx(f,{name:s,render:({field:o})=>e.jsx(B,{...o,children:Object.entries(a).map(([c,t])=>e.jsx(Y,{value:c,control:e.jsx(H,{icon:e.jsx(R,{size:"20"}),checked:o.value===c,checkedIcon:e.jsx(A,{className:"text-primary",size:"20"})}),label:t.label},c))})}),e.jsx(V,{name:s})]}),Fe=({name:s,label:r,baseStyle:a,className:o})=>{const{control:c}=v();return e.jsx(f,{name:s,control:c,defaultValue:"",render:({field:{value:t,onChange:h,...x},fieldState:{error:n}})=>e.jsx(k,{...x,value:t??"",onChange:d=>{h(d.target.value||"")},type:"email",label:r,error:!!n,helperText:n==null?void 0:n.message,sx:a,className:o??""})})},we=({name:s,label:r,className:a})=>{const{control:o}=v();return e.jsx(f,{name:s,control:o,defaultValue:null,render:({field:{value:c,onChange:t},fieldState:{error:h}})=>e.jsxs("div",{children:[e.jsxs(J,{component:"label",variant:"outlined",startIcon:e.jsx(fe,{className:"w-4 h-4"}),className:a||"",children:[c?c.name:r,e.jsx("input",{type:"file",hidden:!0,onChange:x=>{var d;const n=((d=x.target.files)==null?void 0:d[0])||null;t(n)}})]}),h&&e.jsx("p",{className:"text-[hsl(var(--destructive))] text-sm mt-1",children:h.message})]})})},ke=({name:s,options:r,handleCheckboxChange:a,isMulti:o,defaultSelected:c={}})=>{const{control:t,setValue:h,trigger:x}=v(),n=typeof s=="string"&&s?s:"defaultName",d=()=>Object.fromEntries(o?Object.keys(r).map(l=>[l,!1]):Object.keys(r).map(l=>[l,(c==null?void 0:c[l])||!1]));return e.jsx(f,{name:n,control:t,defaultValue:d(),render:({field:l})=>e.jsxs("div",{children:[e.jsx(K,{style:{zoom:.8},children:Object.entries(r).map(([i,p])=>{var u;const b=((u=l.value)==null?void 0:u[i])||!1;return e.jsx(Y,{control:e.jsx(Q,{checked:b,icon:e.jsx(R,{size:20}),checkedIcon:e.jsx(A,{className:"text-primary",size:20}),onChange:m=>{const j=m.target.checked;let C={...l.value,[i]:j};o||(C=Object.fromEntries(Object.keys(r).map(N=>[N,N===i?j:!1]))),l.onChange(C),h(n,C),a(i,j),x(n)}}),label:p.label},i)})}),e.jsx(V,{name:n})]})})},Ee=({name:s,label:r,baseStyle:a,className:o})=>{const{control:c}=v();return e.jsx(f,{name:s,control:c,defaultValue:"",render:({field:{value:t,onChange:h,...x},fieldState:{error:n}})=>e.jsx(k,{...x,value:t??"",onChange:d=>{const l=d.target.value;h(l===""?"":l)},type:"number",label:r,error:!!n,helperText:n==null?void 0:n.message,sx:a,className:o??"",inputProps:{min:0,step:"any"}})})},Ie=({name:s,label:r,baseStyle:a,className:o,uppercase:c})=>{const{control:t}=v(),[h,x]=y.useState(!1);return e.jsx(e.Fragment,{children:e.jsx(f,{name:s,control:t,defaultValue:"",render:({field:n,fieldState:{error:d}})=>e.jsx(k,{type:h?"text":"password",...n,value:n.value||"",label:r,error:!!d,helperText:d==null?void 0:d.message,onChange:l=>{const i=c?l.target.value.toUpperCase():l.target.value;n.onChange(i)},sx:a,className:_(o),variant:"outlined",fullWidth:!0,autoComplete:"new-password",InputProps:{endAdornment:e.jsx(X,{position:"end",children:e.jsx(Z,{onClick:()=>x(!h),edge:"end",children:h?e.jsx(te,{size:18}):e.jsx(be,{size:18})})})}})})})},Oe=({name:s,label:r,baseStyle:a,className:o,rows:c=4,maxRows:t,minRows:h,placeholder:x,disabled:n=!1,required:d,forcedValue:l,error:i})=>{const{control:p}=v();return e.jsx(e.Fragment,{children:e.jsx(f,{name:s,control:p,defaultValue:"",render:({field:b,fieldState:{error:u}})=>e.jsx(k,{...b,value:l||b.value||"",label:r,error:!!u,helperText:u==null?void 0:u.message,disabled:n,multiline:!0,required:d,rows:c,...t!==void 0&&{maxRows:t},...h!==void 0&&{minRows:h},...x!==void 0&&{placeholder:x},...a&&{sx:a},className:_(o)})})})},M="bg-[hsl(var(--background))] border border-[hsl(var(--border))] rounded-md text-[hsl(var(--foreground))] hover:border-[hsl(var(--primary))] focus:border-[hsl(var(--primary))]",S=s=>{const r=s.height||"45px";return{height:r,color:"hsl(var(--foreground))","& .MuiInputBase-input":{height:r,color:"hsl(var(--foreground))",padding:"0 14px","&.Mui-focused":{color:"hsl(var(--foreground))"}},"& .MuiInputLabel-root":{transform:"translate(14px, 11px) scale(1)",color:"hsl(var(--muted))","&.Mui-focused":{color:"hsl(var(--primary))"}},"& .MuiInputLabel-root.Mui-focused":{transform:"translate(14px, -11px) scale(0.75)"},"& .MuiInputLabel-root.MuiFormLabel-filled":{transform:"translate(14px, -11px) scale(0.75)"},"& .MuiOutlinedInput-root":{color:"hsl(var(--foreground))","& fieldset":{borderColor:"hsl(var(--border))"},"&:hover fieldset":{borderColor:"hsl(var(--primary))"},"&.Mui-focused fieldset":{borderColor:"hsl(var(--primary))"}},"& .MuiSelect-icon":{color:"hsl(var(--muted))"},"& .MuiRadio-root":{color:"hsl(var(--muted))","&.Mui-checked":{color:"hsl(var(--primary))"}},"& .MuiInputAdornment-root .MuiSvgIcon-root":{color:"hsl(var(--muted))"},"& .MuiMenu-paper":{backgroundColor:"hsl(var(--background))",color:"hsl(var(--foreground))"},"& .MuiMenu-list .MuiMenuItem-root":{"&:hover":{backgroundColor:"hsl(var(--accent))"},"&.Mui-selected":{backgroundColor:"hsl(var(--accent))","&:hover":{backgroundColor:"hsl(var(--accent))"}}},...s.error&&{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"hsl(var(--destructive))"}}}}},F=s=>{const r={onChange:a=>{}};switch(s.type){case"text":return e.jsx(_e,{...r,name:s.name,label:s.label,uppercase:s.uppercase,baseStyle:S(s),className:M,disabled:s.disabled,forcedValue:s.forcedValue});case"textarea":return e.jsx(Oe,{...r,name:s.name,label:s.label,disabled:s.disabled,forcedValue:s.forcedValue,className:"w-full"});case"email":return e.jsx(Fe,{...r,name:s.name,label:s.label,baseStyle:S(s),className:M});case"number":return e.jsx(Ee,{...r,name:s.name,label:s.label,baseStyle:S(s),className:M});case"file":return e.jsx(we,{...r,name:s.name,label:s.label,className:M});case"checkbox":return e.jsx(ke,{...r,name:s.name,label:s.label,options:s.options,handleCheckboxChange:s.handleCheckboxChange,isMulti:s.isMulti,defaultSelected:s.defaultSelected});case"select":return e.jsx(Me,{...r,name:s.name,options:s.options,label:s.label,baseStyle:S(s),className:M,placeholder:s.placeholder});case"date":return e.jsx(Ne,{...r,name:s.name,label:s.label,baseStyle:S(s),className:M,error:s.error});case"radio":return e.jsx(Se,{...r,name:s.name,label:s.label,options:s.options});case"password":return e.jsx(Ie,{...r,name:s.name,label:s.label,baseStyle:S(s),className:M});default:return null}},I=({children:s,className:r,groupName:a,rowCols:o,wrapperClassName:c})=>e.jsxs("div",{className:_("flex flex-col gap-3",r),children:[a&&e.jsx("div",{className:"font-bold pt-3",children:a}),e.jsx("div",{className:_("formFieldRow",o?`row-cols-${o}`:"",c),children:s})]}),w=({id:s,children:r,className:a="",flexdirection:o,error:c,...t})=>e.jsxs("div",{...t,className:_("fieldWrapper",a,o?"flex-"+o:"flex-col"),children:[r,c&&e.jsx("span",{className:"text-sm text-[hsl(var(--destructive))]",children:c})]}),Ve=({children:s,className:r})=>e.jsx("div",{className:_("space-y-4 bg-card py-10 px-2 mt-4 rounded-md",r),children:s}),Pe=()=>{const[s,r]=y.useState(window.innerWidth);return y.useEffect(()=>{const a=()=>r(window.innerWidth);return window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]),s},Le=()=>{var u;const s=Pe(),{id:r}=ee(),a=!!r,{setTitle:o}=ne(),t=((u=se().state)==null?void 0:u.selectedRow)||null;y.useEffect(()=>{o(a?"Edit Client":"Create Client")},[o]);const h=ae({resolver:le(Ce),defaultValues:{first_name:"",last_name:"",email:"",phone_number:"",password:"",mac_address:"",role_id:1,started_on:""}}),{control:x,reset:n,formState:{errors:d,isSubmitting:l},handleSubmit:i}=h;console.log("Form errors:",d);const{isLoading:p}=me({onUserCreateSuccess:m=>{console.log(m),n({})}});he({user_id:Number(r),onUserUpdateSuccess:m=>{console.log(m),n({})}}),y.useEffect(()=>{t&&Object.keys(t).length>0&&n({first_name:t.first_name||"",last_name:t.last_name||"",email:t.email||"",phone_number:t.phone_number||"",mac_address:t.mac_address||"",role_id:t.role_id||1,started_on:t.started_on||""})},[t,n]),console.log(t);const b=i(async m=>{console.log(m);const j={first_name:m.first_name,last_name:m.last_name,email:m.email,phone_number:m.phone_number,mac_address:m.mac_address||null,role_id:m.role_id,is_active:!0,started_on:m.started_on};console.log(j)});return e.jsx(xe,{methods:h,children:e.jsxs("form",{onSubmit:b,children:[e.jsxs(Ve,{className:"py-2 lg:pr-32 md:pr-0",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:a?"Edit Client":"Create Client"}),e.jsxs(pe,{children:[e.jsxs(I,{rowCols:s<768?1:2,className:"mb-4",children:[e.jsx(w,{children:F({label:"First Name",name:"first_name",type:"text",placeholder:"Enter first name"})}),e.jsx(w,{children:F({label:"Last Name",name:"last_name",type:"text",placeholder:"Enter last name"})})]}),e.jsxs(I,{rowCols:s<768?1:2,className:"mb-4",children:[e.jsx(w,{children:F({...ye.fields.email,name:"email"})}),e.jsx(oe,{name:"phone_number",render:({field:m})=>e.jsxs(ce,{children:[e.jsx(ie,{children:e.jsx(ue,{value:m.value||"",onChange:m.onChange})}),e.jsx(de,{})]})})]}),e.jsxs(I,{rowCols:s<768?1:2,className:"mb-4",children:[e.jsx(w,{children:F({label:"Role",name:"role_id",type:"select",placeholder:"Select role",options:{1:{label:"Client"},2:{label:"Admin"}},isMulti:!1})}),e.jsx(w,{children:F({label:"Start Date",name:"started_on",type:"date",placeholder:"YYYY-MM-DD"})})]})]})]}),e.jsx("div",{className:"flex justify-start space-x-2 mt-4",children:e.jsx("button",{type:"submit",className:"bg-primary text-white px-4 py-2 rounded-md",disabled:l||p,children:l||p?a?"Updating...":"Submitting...":a?"Update":"Submit"})})]})})},Be=()=>e.jsx(Le,{});export{Be as UserCreation,Be as default};
//# sourceMappingURL=page-DswKuqGc.js.map
