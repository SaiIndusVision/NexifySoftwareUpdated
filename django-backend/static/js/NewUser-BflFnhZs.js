import{j as t}from"./mui-Bss3QQll.js";import{u as S,D as j}from"./useDynamicPagination-paL4eO_A.js";import{r,f as N}from"./react-core-spor8t4e.js";import{h as k,u as g,i as v,f as C,j as E,A as y,B as P,l as A}from"./index-CNItTNil.js";import{u as U}from"./useFilterApi-C8pB0SHd.js";import{d as R,u as T}from"./data-utils-CsUIpaiA.js";import{u as L}from"./userApi-BqluZRjZ.js";import"./state-management-7spMuoR3.js";import"./ui-utils-D3kZWK2d.js";import"./radix-B4zV8Utj.js";import"./form-tools-C_3viVMX.js";/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],I=k("SquarePen",D),M=({checked:n,onCheckedChange:i})=>{const[s,e]=r.useState(n);return r.useEffect(()=>{e(n)},[n]),t.jsx(t.Fragment,{children:t.jsx("button",{className:`relative w-12 h-6 flex items-center rounded-full transition-all 
      ${s?"bg-primary":"bg-gray-300"}`,onClick:()=>{e(!s),i(!s)},children:t.jsx("div",{className:`absolute left-1 w-5 h-5 bg-white rounded-full shadow-md transform 
        transition-all ${s?"translate-x-6":"translate-x-0"}`})})})},q=(n,i)=>[{key:"first_name",id:"first_name",name:"First Name"},{key:"last_name",id:"last_name",name:"Last Name"},{key:"email",id:"email",name:"Email"},{key:"phone_number",id:"phone_number",name:"Phone Number",cell:(s,e)=>{const a=e.country_code||"",d=e.phone_number||"",m=d.startsWith(a)?d.slice(a.length):d;return t.jsx("span",{children:m})}},{key:"role_id",id:"role_id",name:"Role",cell:(s,e)=>t.jsx("span",{children:e.role_id==1?"Client":"Admin"})},{key:"date_joined",id:"date_joined",name:"Started On",cell:(s,e)=>e!=null&&e.date_joined?new Date(e.date_joined).toLocaleDateString():"-"},{key:"is_verified",id:"is_verified",name:"Verified",cell:(s,e)=>t.jsx("span",{children:e.is_verified?"Yes":"No"})},{key:"status",id:"status",name:"Status",cell:(s,e)=>t.jsx("div",{className:"flex justify-center",children:t.jsx(M,{checked:e==null?void 0:e.is_active,onCheckedChange:a=>{n(e,a)}})})},{key:"actions",id:"actions",name:"Action",cell:(s,e)=>t.jsx("div",{className:"flex justify-center",children:t.jsx("button",{className:"p-2 rounded-md hover:bg-muted/20",onClick:()=>{i(`update-user/${e.id}`,e)},children:t.jsx(I,{className:"w-5 h-5 text-muted-foreground"})})})},{id:"expand",name:"expand",renderDetailPanel:s=>t.jsxs("div",{className:"p-4",children:[t.jsxs("h3",{children:["Details for ",s.name]}),t.jsxs("p",{children:["Additional info: ",s.description||"No description"]})]})}],x=[{partner_id:"62940e36-c368-43f8-b978-4111223a1cac",hashed_key:"befb8eadb0fac508d695b7395ec10543m8ctxoh9",role_id:"cdadd7a8-a04a-40ba-a5b3-2b1bf6d788c8",email:"reach2tayib@gmail.com",first_name:"Mohammed",last_name:"Tayib",api_key:"7b4d9b49-1794-4a91-826a-749cf0d8a87a",is_active:!1,business_type:"large_enterprise",created_by:"4b9517bd-692b-459d-b39f-0c6147a67e31",updated_by:null,products:[{id:"80185a93-7242-4680-8922-297d85dfbd2d",name:"Card"}]},{partner_id:"27644155-4cc2-4541-93ea-babd214d7df3",hashed_key:"4f0440dc0a6d253296aff77f4566d9d8m8ctn5re",role_id:"cdadd7a8-a04a-40ba-a5b3-2b1bf6d788c8",email:"sana@gmail.com",first_name:"Sana",last_name:"G",api_key:"eccc2215-82b7-46be-a418-fb2d997224e6",is_active:!0,business_type:"large_enterprise",created_by:null,updated_by:null,products:[]},{partner_id:"274a5724-5e98-49ff-90fe-0a0fd49f6dff",hashed_key:"bbce159e39b5e7ea1096fc42ebfeff03m85s76dn",role_id:"cdadd7a8-a04a-40ba-a5b3-2b1bf6d788c8",email:"contact2tayib@gmail.com",first_name:"Mohammed",last_name:"Tayibulla",api_key:"41dc8bcf-dff0-4152-a11a-49183559bd31",is_active:!0,business_type:"large_enterprise",created_by:null,updated_by:null,products:[]}],F=()=>{const n=R(),{mutate:i,isPending:s,error:e}=T({mutationFn:async a=>{await L.userStatusUpdate(a)},onSuccess:()=>{g.success("User status updated successfully"),n.invalidateQueries({queryKey:["userStatusUpdate"]})},onError:a=>{g.error(a.message||"Status update failed")}});return{mutate:i,isLoading:s,error:e}},z=(n,i,s=!0)=>{const[e,a]=r.useState(null),[d,m]=r.useState(s),[p,f]=r.useState(null),l=r.useCallback(async _=>{m(!0),f(null);try{console.log(n);const c=v(n);console.log(c);const o=_??i,{data:h}=await C.get(c,{params:o});a(h)}catch(c){const o=c instanceof Error?c.message:"An unknown error occurred";g.error("Error Fetching Data",{description:o}),f(o)}finally{m(!1)}},[n]);return r.useEffect(()=>{s&&l()},[l,s]),{data:e,loading:d,error:p,fetchData:l}},Z=()=>{const n=N(),{setTitle:i}=E();r.useEffect(()=>{i("Create Clients")},[i]);const[s,e]=r.useState([]),{data:a=[],loading:d,error:m}=z("NUSERS.USER.LIST");console.log(a);const{mutate:p}=F(),f=async(u,b)=>{!u||!u.id||(console.log(u),await p({is_active:b,user_id:u.id}))};r.useEffect(()=>{a&&Array.isArray(a==null?void 0:a.results)&&e(a==null?void 0:a.results)},[a,f]);const l=S({endpoint:y.NUSERS.USER.LIST,initialPageSize:10,initialData:x,dataPath:"transactions",totalRecordsPath:"totalRecords"}),_=()=>{n("create-user")},c=(u,b)=>{n(u,{state:{selectedRow:b}})},o=U({endpoint:y.NUSERS.USER.LIST,initialData:x,baseQueryParams:{}}),h=q(f,c);return t.jsxs("div",{className:"",children:[t.jsx("div",{className:"flex flex-col",children:t.jsxs("div",{className:"mb-4 flex items-center",children:[(o.loading||l.loading||d)&&t.jsx("span",{className:"text-blue-500",children:"Loading data..."}),(o.error||l.error||m)&&t.jsx("span",{className:"text-red-500",children:"Error loading data"})]})}),t.jsx(j,{columns:h,data:a&&a.length>0?a:s,tableWrapperClass:"bg-background p-5 rounded-md",defaultSortColumn:"niumId",defaultSortDirection:"asc",renderLeftSideActions:()=>t.jsxs(P,{onClick:_,className:"bg-primary text-white px-4",children:[" ",t.jsx(A,{})," Create Clients"]}),loading:l.loading??d,paginationMode:"static",onPageChange:async(u,b)=>[],totalRecords:l.totalRecords,filter:{filterOption:!0,mode:"static",rederFilerOptions:{search:!0},dynamicCallbacks:void 0}})]})};export{Z as default};
//# sourceMappingURL=NewUser-BflFnhZs.js.map
