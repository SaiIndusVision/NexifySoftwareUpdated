{"version":3,"file":"ResetPasswordPage-CpQsA24r.js","sources":["../../../src/features/auth/components/ChangePasswordForm.tsx","../../../src/components/ui/card.tsx","../../../src/components/ui/use-toast.ts","../../../src/hooks/use-toast.ts","../../../src/features/auth/pages/reset-password/ResetPasswordPage.tsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { ROUTES } from \"@/core/routes/constants\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { useForm } from \"react-hook-form\";\n\nimport { Eye, EyeOff, Loader2 } from \"lucide-react\";\nimport * as z from \"zod\";\n// import { useToast } from \"@/hooks/use-toast\";\nimport { toast } from \"sonner\";\nimport axios from \"axios\";\nimport axiosInstance from \"@/core/services/axios/axiosInstance\";\nimport { API } from \"@/core/constant/apis\";\n\ninterface ChangePasswordFormProps {\n  token: string | undefined;\n  userId: string | undefined;\n  isResetPassword: boolean | undefined;\n}\n\n\nconst formSchema = (isResetPassword: boolean) => z.object({\n  ...(isResetPassword ? {} : {\n    currentPassword: z.string().min(1, \"Current password is required\"),\n  }),\n  password: z.string()\n  .nonempty(\"Password is required\")\n  .min(8, \"Password must be  8+ characters with uppercase, number, and specialÂ character\")\n    .regex(/[A-Z]/, \"Password must include at least one uppercase letter\")\n    .regex(/[0-9]/, \"Password must include at least one number\")\n    .regex(/[^A-Za-z0-9]/, \"Password must include at least one special character\"),\n   confirmPassword: z.string().min(1, \"Confirm password is required\"),\n\n}).refine(data => data.password === data.confirmPassword, {\n  message: \"Passwords don't match\",\n  path: [\"confirmPassword\"],\n});\n\nconst ChangePasswordForm: React.FC<ChangePasswordFormProps> = ({\n  userId,\n  token,\n  isResetPassword = false\n}) => {\n  const [loading, setLoading] = useState(false);\n  const navigate = useNavigate();\n  const [showPassword, setShowPassword] = useState(false);\n  const [showConfirmPassword, setShowConfirmPassword] = React.useState(false);\n\n  // const { toast } = useToast();\n\n  type FormValues = {\n    currentPassword?: string;\n    password: string;\n    confirmPassword: string;\n  };\n\n  const form = useForm<FormValues>({\n    resolver: zodResolver(formSchema(isResetPassword)),\n    defaultValues: {\n      ...(isResetPassword ? {} : { currentPassword: \"\" }),\n      password: \"\",\n      confirmPassword: \"\",\n    },\n  });\n  const onSubmit = async (values: FormValues) => {\n    setLoading(true);\n    try {\n      if (isResetPassword && token && userId) {\n        // Step 1: Validate the reset token\n        const validateResponse = await axiosInstance.post(\"/reset-link-validate/\", { token });\n\n        if (validateResponse.status !== 200) {\n          toast.error('Sending email failed 64');\n          throw new Error(\"The password reset link is invalid or has expired.\");\n        }\n\n        // Step 2: Reset password\n        const resetPayload = {\n          token,\n          new_password: values.password,\n          confirm_password: values.confirmPassword,\n        };\n        console.log(resetPayload)\n\n        const data = await axiosInstance.put(`${API.AUTH.FORGOT_PASSWORD}${userId}/`, resetPayload);\n        toast.success('Password reset email sent successfully')\n        navigate(ROUTES.AUTH.LOGIN);\n\n      } else {\n        // Logged-in user changing their password\n        const payload = {\n          new_password: values.password,\n          confirm_password: values.confirmPassword,\n        };\n\n        await axiosInstance.post(API.AUTH.CHANGE_PASSWORD, payload);\n\n        toast.success('Password reset successfully')\n      }\n\n    } catch (error) {\n      if (error?.response?.data?.message == \"Link has expired, please request a new one to reset your password.\") {\n        toast.error(`${error?.response?.data?.message}`);\n        navigate(ROUTES.AUTH.SEND_PASSWORD_RESET);\n      } else {\n\n        console.log(error)\n        console.error(\"Password change error:\", error);\n        toast.error(`${error?.response?.data?.message}`);\n      }\n\n    }\n    setLoading(false);\n  };\n\n  return (\n    <Form {...form}>\n      <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\n        {/* {!isResetPassword && (\n          <FormField\n            control={form.control}\n            name=\"currentPassword\"\n            render={({ field }) => (\n              <FormItem>\n                <FormLabel>Current Password</FormLabel>\n                <FormControl>\n                  <Input \n                    type=\"password\" \n                    placeholder=\"Enter current password\" \n                    {...field} \n                  />\n                </FormControl>\n                <FormMessage />\n              </FormItem>\n            )}\n          />\n        )} */}\n\n        <FormField\n          control={form.control}\n          name=\"password\"\n          render={({ field }) => (\n            <FormItem>\n              {/* <FormLabel>New Password</FormLabel> */}\n              <FormControl>\n                <div className=\"relative\">\n                  <Input\n                    {...field}\n                    type={showPassword ? \"text\" : \"password\"}\n                    placeholder=\"New Password*\"\n                    autoComplete=\"off\"\n                    hasError={!!form.formState.errors.password}\n\n                    className=\"rounded-full\"\n                  />\n                  <button\n                    type=\"button\"\n                    className=\"absolute inset-y-0 right-0 pr-3 flex items-center hover:text-accent-foreground\"\n                    onClick={() => setShowPassword(!showPassword)}\n                  >\n                    {showPassword ? (\n                      <Eye className=\"h-5 w-5 text-muted-foreground\" />\n                    ) : (\n                      <EyeOff className=\"h-5 w-5 text-muted-foreground\" />\n                    )}\n                  </button>\n                </div>\n                {/* <Input \n                  type=\"password\" \n                  placeholder=\"Enter new password\" \n                  {...field} \n                /> */}\n              </FormControl>\n              <FormMessage />\n            </FormItem>\n          )}\n        />\n\n        <FormField\n          control={form.control}\n          name=\"confirmPassword\"\n          render={({ field }) => (\n            <FormItem>\n              {/* <FormLabel>Confirm Password</FormLabel> */}\n              <FormControl>\n                <div className=\"relative\">\n                  <Input\n                    {...field}\n                    type={showConfirmPassword ? \"text\" : \"password\"}\n                    placeholder=\"Confirm Password*\"\n                    autoComplete=\"off\"\n                    hasError={!!form.formState.errors.confirmPassword}\n                    className=\"rounded-full\"\n                  />\n                  <button\n                    type=\"button\"\n                    className=\"absolute inset-y-0 right-0 pr-3 flex items-center hover:text-accent-foreground\"\n                    onClick={() => setShowConfirmPassword(!showConfirmPassword)}\n                  >\n                    {showConfirmPassword ? (\n                      <Eye className=\"h-5 w-5 text-muted-foreground\" />\n                    ) : (\n                      <EyeOff className=\"h-5 w-5 text-muted-foreground\" />\n                    )}\n                  </button>\n                </div>\n                {/* <Input \n                  type=\"password\" \n                  placeholder=\"Confirm your password\" \n                  {...field} \n                /> */}\n              </FormControl>\n              <FormMessage />\n            </FormItem>\n          )}\n        />\n\n        <Button\n          type=\"submit\"\n          className=\"w-full font-secondary rounded-full bg-[#43996A]\"\n          disabled={loading}\n        >\n          {loading ? \"Processing...\" : (isResetPassword ? \"Reset Password\" : \"Change Password\")}\n        </Button>\n      </form>\n    </Form>\n  );\n};\n\nexport default ChangePasswordForm;\n","import * as React from \"react\"\n\nimport { cn } from \"@/utils/cn\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-xl border bg-card text-card-foreground shadow\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"font-semibold leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n","import { useEffect, useState } from \"react\"\n\nimport { Toast, ToastActionElement, ToastProps } from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 3\nconst TOAST_REMOVE_DELAY = 1000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: string | undefined\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: string | undefined\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case actionTypes.ADD_TOAST:\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case actionTypes.UPDATE_TOAST:\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case actionTypes.DISMISS_TOAST: {\n      const { toastId } = action\n\n      if (toastId) {\n        toastTimeouts.set(\n          toastId,\n          setTimeout(() => {\n            dispatch({\n              type: actionTypes.REMOVE_TOAST,\n              toastId: toastId,\n            })\n          }, TOAST_REMOVE_DELAY)\n        )\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case actionTypes.REMOVE_TOAST:\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: actionTypes.UPDATE_TOAST,\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: actionTypes.DISMISS_TOAST, toastId: id })\n\n  dispatch({\n    type: actionTypes.ADD_TOAST,\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = useState<State>(memoryState)\n\n  useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: actionTypes.DISMISS_TOAST, toastId }),\n  }\n}\n\nexport { useToast, toast }\n","\"use client\"\n\n// Inspired by react-hot-toast library\nimport * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"] | undefined\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"] | undefined\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open:boolean) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nimport { useToast as useShadcnToast } from \"@/components/ui/use-toast\";\n\nexport const useToast = () => {\n  const { toast, ...rest } = useShadcnToast();\n  \n  return {\n    toast,\n    ...rest\n  };\n};\n\nexport { toast } from \"@/components/ui/use-toast\";\n","// import { useEffect, useState } from \"react\";\n// import { useLocation, useNavigate } from \"react-router-dom\";\n// import AuthLayout from \"../../components/AuthLayout\";\n// import ChangePasswordForm from \"../../components/ChangePasswordForm\";\n// import { ROUTES } from \"@/core/routes/constants\";\n// import { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\n// import { Loader2 } from \"lucide-react\";\n// import { useToast } from \"@/hooks/use-toast\";\n// import axios from \"axios\";\n// import { Button } from \"@/components/ui/button\";\n\n// const ResetPasswordPage = () => {\n//   const [token, setToken] = useState<string | null>(null);\n//   const [loading, setLoading] = useState(true);\n//   const [tokenError, setTokenError] = useState<string | null>(null);\n//   const location = useLocation();\n//   const navigate = useNavigate();\n//   const { toast } = useToast();\n\n//   useEffect(() => {\n//     // Extract token from URL query parameters\n//     const params = new URLSearchParams(location.search);\n//     const tokenParam = params.get(\"token\");\n    \n//     if (!tokenParam) {\n//       setTokenError(\"Check your email for the link\");\n//       setLoading(false);\n//       return;\n//     }\n    \n//     // Optionally verify token with your API\n//     const verifyToken = async () => {\n//       try {\n//         // You could add an API endpoint to verify the token\n//         // await axios.post(`${process.env.REACT_APP_API_URL}/users/verify-reset-token`, { token: tokenParam });\n        \n//         // For now, just set the token\n//         setToken(tokenParam);\n//       } catch (error) {\n//         console.error(\"Token validation error:\", error);\n        \n//         let errorMessage = \"Invalid or expired reset token. Please request a new password reset link.\";\n//         if (axios.isAxiosError(error) && error.response) {\n//           errorMessage = error.response.data?.message || errorMessage;\n//         }\n        \n//         setTokenError(errorMessage);\n//         toast({\n//           variant: \"destructive\",\n//           title: \"Error\",\n//           description: errorMessage\n//         });\n//       } finally {\n//         setLoading(false);\n//       }\n//     };\n    \n//     verifyToken();\n//   }, [location, navigate, toast]);\n\n//   const handleRequestNewLink = () => {\n//     navigate(ROUTES.AUTH.FORGET_PASSWORD);\n//   };\n\n//   return (\n//     <AuthLayout>\n//         <CardHeader>\n//           <CardTitle className=\"text-2xl font-bold text-center\">Reset Password</CardTitle>\n//           {/* <CardDescription className=\"text-center\">\n//             Create a new password for your account\n//           </CardDescription> */}\n//         </CardHeader>\n//         <CardContent>\n//           {loading ? (\n//             <div className=\"flex justify-center items-center py-8\">\n//               <Loader2 className=\"h-8 w-8 animate-spin text-primary\" />\n//             </div>\n//           ) : tokenError ? (\n//             <div className=\"text-center space-y-4\">\n//               <p className=\"text-destructive\">{tokenError}</p>\n//               <Button \n//                 onClick={handleRequestNewLink}\n//                 className=\"mt-4\"\n//               >\n//                 Request New Reset Link\n//               </Button>\n//             </div>\n//           ) : (\n//             token && <ChangePasswordForm token={token} isResetPassword={true} />\n//           )}\n//         </CardContent>\n//     </AuthLayout>\n//   );\n// };\n\n// export default ResetPasswordPage;\n\nimport { useEffect, useState } from \"react\";\nimport {  useNavigate,useParams, useLocation } from \"react-router-dom\";\nimport AuthLayout from \"../../components/AuthLayout\";\nimport ChangePasswordForm from \"../../components/ChangePasswordForm\";\nimport { ROUTES } from \"@/core/routes/constants\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Loader2 } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport axios from \"axios\";\nimport { Button } from \"@/components/ui/button\";\n\nconst ResetPasswordPage = () => {\n  const [token, setToken] = useState<string | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [tokenError, setTokenError] = useState<string | null>(null);\n  \nconst { id: userIDParam } = useParams();\nconst location = useLocation();\n\n  const navigate = useNavigate();\n  const { toast } = useToast();\n\n  useEffect(() => {\n    // Extract token from URL query parameters\n    const params = new URLSearchParams(location.search);\n   \n    const tokenParam = params.get(\"token\");\n    console.log(tokenParam)\n    \n    if (!tokenParam) {\n      setTokenError(\"No reset token found. Please request a new password reset link.\");\n      setLoading(false);\n      return;\n    }\n    \n    // Optionally verify token with your API\n    const verifyToken = async () => {\n      try {\n        // You could add an API endpoint to verify the token\n        // await axios.post(`${process.env.REACT_APP_API_URL}/users/verify-reset-token`, { token: tokenParam });\n        \n        // For now, just set the token\n        setToken(tokenParam);\n      } catch (error) {\n        console.error(\"Token validation error:\", error);\n        \n        let errorMessage = \"Invalid or expired reset token. Please request a new password reset link.\";\n        if (axios.isAxiosError(error) && error.response) {\n          errorMessage = error.response.data?.message || errorMessage;\n        }\n        \n        setTokenError(errorMessage);\n        toast({\n          variant: \"destructive\",\n          title: \"Error\",\n          description: errorMessage\n        });\n      } finally {\n        setLoading(false);\n      }\n    };\n    \n    verifyToken();\n  }, [location, navigate, toast]);\n\n  const handleRequestNewLink = () => {\n    navigate(ROUTES.AUTH.FORGET_PASSWORD);\n  };\n\n  return (\n    <AuthLayout>\n        <CardHeader>\n          <CardTitle className=\"text-2xl font-bold text-center\">Reset Password</CardTitle>\n          <CardDescription className=\"text-center\">\n            {/* {userIDParam} */}\n            Create a new password for your account \n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          {loading ? (\n            <div className=\"flex justify-center items-center py-8\">\n              <Loader2 className=\"h-8 w-8 animate-spin text-primary\" />\n            </div>\n          ) : tokenError ? (\n            <div className=\"text-center space-y-4\">\n              <p className=\"text-destructive\">{tokenError}</p>\n              {/* <Button \n                onClick={handleRequestNewLink}\n                className=\"mt-4\"\n              >\n                Request New Reset Link\n              </Button> */}\n            </div>\n          ) : (\n            token && <ChangePasswordForm userId={userIDParam} token={token} isResetPassword={true} />\n          )}\n        </CardContent>\n    </AuthLayout>\n  );\n};\n\nexport default ResetPasswordPage;\n"],"names":["formSchema","isResetPassword","z.object","z.string","data","ChangePasswordForm","userId","token","loading","setLoading","useState","navigate","useNavigate","showPassword","setShowPassword","showConfirmPassword","setShowConfirmPassword","React","form","useForm","zodResolver","onSubmit","values","axiosInstance","toast","resetPayload","API","ROUTES","payload","error","_b","_a","_d","_c","_f","_e","jsx","Form","jsxs","FormField","field","FormItem","FormControl","Input","Eye","EyeOff","FormMessage","Button","Card","React.forwardRef","className","props","ref","cn","CardHeader","CardTitle","CardDescription","CardContent","CardFooter","TOAST_LIMIT","TOAST_REMOVE_DELAY","actionTypes","count","genId","toastTimeouts","reducer","state","action","toastId","dispatch","t","listeners","memoryState","listener","id","update","dismiss","open","useToast","setState","useEffect","index","rest","useShadcnToast","ResetPasswordPage","setToken","tokenError","setTokenError","userIDParam","useParams","location","useLocation","tokenParam","errorMessage","axios","AuthLayout","Loader2"],"mappings":"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"}