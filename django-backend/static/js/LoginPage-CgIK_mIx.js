import{j as e}from"./mui-Bss3QQll.js";import{A as w}from"./AuthLayout-3EJfzjkv.js";import{f as y,b as v,L}from"./react-core-spor8t4e.js";import{b as N,s as p,d as b}from"./form-tools-C_3viVMX.js";import{a as k,u as n,s as F,F as E,b as x,c as h,d as g,I as j,e as _,E as P,B as S,L as I,t as A}from"./index-CNItTNil.js";import{u as C}from"./data-utils-CsUIpaiA.js";import{i as B}from"./state-management-7spMuoR3.js";import{E as D}from"./eye-off-DYV2rxpG.js";import"./ui-utils-D3kZWK2d.js";import"./radix-B4zV8Utj.js";const q=()=>{const a=B(),t=y(),{mutate:l,isPending:i,error:o}=C({mutationFn:k.loginUser,onSuccess:s=>{a(F({role_name:s.role_name,user_id:s.user_id,first_name:s.first_name,last_name:s.last_name,email:s.email,user_created_date:s.user_created_date,access_token:s.access_token,refresh_token:s.refresh_token,secret_key_verified:s.secret_key_verified})),s.message=="Login successful"?s.role_name=="Admin"?(t("/login"),n.error("Invalid user role")):s.role_name=="User"&&(n.success("Login successful"),s.secret_key_verified?t("/client/workspaces"):t("/client/secret-key")):n.error("Invalid user role")},onError:s=>{var r,m,c,d,u,f;console.log(s),((m=(r=s.response)==null?void 0:r.data)==null?void 0:m.message)=="Invalid email or password"?n.error(((d=(c=s.response)==null?void 0:c.data)==null?void 0:d.message)||"Invalid email or password"):n.error(((f=(u=s.response)==null?void 0:u.data)==null?void 0:f.message)||"Login failed")}});return{mutate:l,isLoading:i,error:o}},M=N({email:p().min(1,"Email is required").email("Please enter a valid email"),password:p().min(1,"Password is required")}),R=()=>{const[a,t]=v.useState(!1),{mutate:l,isLoading:i}=q(),o=b({resolver:A(M),defaultValues:{email:"",password:""}}),s=r=>{l(r)};return e.jsxs(E,{...o,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"text-2xl font-secondary font-bold text-[#062393]",children:"Welcome Back!"}),e.jsx("div",{className:"text-sm font-secondary  font-normal ",children:"Let's get started"})]}),e.jsxs("form",{onSubmit:o.handleSubmit(s),className:"space-y-6",children:[e.jsx(x,{control:o.control,name:"email",render:({field:r})=>e.jsxs(h,{children:[e.jsx(g,{children:e.jsx(j,{...r,type:"email",placeholder:"Email Address*",autoComplete:"off",hasError:!!o.formState.errors.email,className:"rounded-full"})}),e.jsx(_,{})]})}),e.jsx(x,{control:o.control,name:"password",render:({field:r})=>e.jsxs(h,{children:[e.jsx(g,{children:e.jsxs("div",{className:"relative",children:[e.jsx(j,{...r,type:a?"text":"password",placeholder:"Password*",autoComplete:"off",hasError:!!o.formState.errors.password,className:"rounded-full"}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center hover:text-accent-foreground",onClick:()=>t(!a),children:a?e.jsx(P,{className:"h-5 w-5 text-muted-foreground"}):e.jsx(D,{className:"h-5 w-5 text-muted-foreground"})})]})}),e.jsx(_,{})]})}),e.jsx(S,{type:"submit",disabled:i,className:"w-full font-secondary rounded-full bg-[#43996A]",children:i?e.jsxs(e.Fragment,{children:[e.jsx(I,{className:"mr-2 h-4 w-4 animate-spin"}),"Please wait"]}):"Login"}),e.jsx("div",{className:"text-center ",children:e.jsx(L,{to:"/send-password-reset-link",className:"text-sm font-normal font-secondary text-[#062393] hover:text-primary transition-colors",children:"Forgot Password"})})]})]})},Q=()=>e.jsx(w,{title:"Login",children:e.jsx(R,{})});export{Q as default};
//# sourceMappingURL=LoginPage-CgIK_mIx.js.map
