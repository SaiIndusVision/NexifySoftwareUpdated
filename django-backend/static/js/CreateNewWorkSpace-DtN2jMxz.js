import{j as e}from"./mui-BFA6lQrI.js";import{r as l,f as N}from"./react-core-CQlor4TK.js";import{j as S,t as E,l as C,F,b as T,c as W,d as R,I as A,e as I,u as c}from"./index-Dekx5HmU.js";import{d as P}from"./form-tools-D5DSvKKH.js";import{u as z}from"./state-management-hQ1z8sur.js";import"./ui-utils-DmSiVVjI.js";import"./radix-BHg8RD76.js";import"./data-utils-7BzZlo9U.js";const B="/assets/png/rafiki-Cqm-Y6hK.png",Y=()=>{const{setTitle:u}=S();l.useEffect(()=>{},[u]);const f=N(),[d,x]=l.useState(!1),[m,p]=l.useState(null),[g,j]=l.useState("Workspace name"),b=l.useMemo(()=>s=>s.auth,[]),i=z(b),o=P({resolver:E(C),mode:"onSubmit",defaultValues:{name:"",created_by:(i==null?void 0:i.user_id)??void 0}}),y=async s=>{x(!0),p(null);const a="http://localhost:8001/api/workspace/",t="http://localhost:8000/api/workspace/";try{const[r,h]=await Promise.all([fetch(a,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(s)}),fetch(t,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(s)})]);if(!r.ok||!h.ok){const v=await r.json().catch(()=>({})),k=await h.json().catch(()=>({}));throw new Error(v.message||k.message||"Failed to create workspace")}const n=await r.json();c.success((n==null?void 0:n.message)||"Workspace created successfully!"),f("/client/workspaces")}catch(r){p(r instanceof Error?r.message:"Unexpected error"),m=="Workspace name must be unique"?c.error("A workspace with this name already exists. Please choose a different name."):c.error(m||"Error creating workspace")}finally{x(!1)}},w=({mainText:s})=>e.jsxs("div",{style:{display:"flex",width:"100%"},children:[e.jsxs("div",{style:{background:"linear-gradient(219.95deg, #435FCD -2.18%, #062393 61.84%, #020B2D 132.87%)",padding:"20px",color:"white",height:"100%",width:"400px",borderTopLeftRadius:"10px"},children:[e.jsxs("h1",{style:{fontSize:"24px"},children:[e.jsx("span",{style:{color:"white"},children:"NEX"}),e.jsx("span",{style:{color:"#22C55E"},children:"IFY"})]}),e.jsx("h2",{style:{fontSize:"18px"},children:s}),e.jsx("div",{style:{marginTop:"20px"},children:[...Array(3)].map((a,t)=>e.jsx("div",{style:{backgroundColor:"#3B82F6",margin:"10px 0",padding:"10px",borderRadius:"5px"}},t))})]}),e.jsx("div",{style:{backgroundColor:"#F3F4F6",width:"100%"},children:e.jsxs("div",{style:{padding:"20px"},children:[e.jsx("div",{style:{backgroundColor:"#E5E7EB",height:"40px",width:"60%",margin:"0 20px auto",borderRadius:"5px"}}),[...Array(3)].map((a,t)=>e.jsx("div",{style:{backgroundColor:"#E5E7EB",height:"60px",width:"90%",margin:"10px auto",borderRadius:"5px"}},t))]})})]});return e.jsxs("div",{className:"flex flex-col py-4",children:[e.jsx("div",{className:" mx-auto mb-8",children:e.jsx("div",{className:" bg-opacity-25 flex justify-center items-center relative z-10",children:e.jsx("div",{className:"p-8 w-full min-w-[calc(90vw)] rounded-2xl border-2 border-gray-200 flex justify-between items-center",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-blue-900",children:"Welcome! Lets get started"}),e.jsxs("p",{className:"text-gray-400",children:["Create your first ",e.jsx("span",{className:"text-gray-500 font-semibold",children:"workspace"})]})]})})})}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsxs("div",{className:"basis-full lg:basis-1/2 flex flex-col gap-8",children:[e.jsx("div",{className:"flex flex-col  gap-8",children:e.jsx("div",{className:"bg-opacity-25 relative z-10",children:e.jsx("div",{className:"p-8 w-full rounded-2xl border-2 border-gray-200 flex justify-between items-center",children:e.jsx(F,{...o,children:e.jsxs("form",{onSubmit:o.handleSubmit(y),className:"space-y-2 w-full",children:[e.jsx(T,{control:o.control,name:"name",render:({field:s})=>e.jsxs(W,{children:[e.jsx(R,{children:e.jsx(A,{...s,onChange:a=>{s.onChange(a),j(a.target.value||"Workspace name")},hasError:!!o.formState.errors.name,placeholder:"Workspace Name*",className:"rounded-full"})}),e.jsx(I,{})]})}),e.jsx("button",{type:"submit",disabled:d,className:"bg-primary hover:bg-green-600 text-white py-2 px-4 rounded-full flex items-center gap-2",children:d?"Creating...":"Create Workspace"})]})})})})}),e.jsx("div",{className:"flex items-start justify-center rounded-lg",children:e.jsx("div",{className:"text-center",children:e.jsx("img",{src:B,alt:"Workspace illustration",className:"max-w-full h-auto mx-auto"})})})]}),e.jsx("div",{className:"basis-full lg:basis-1/2 flex w-full rounded-lg",children:e.jsx(w,{mainText:g})})]})]})};export{Y as default};
