import{j as e,D as Z}from"./mui-Bss3QQll.js";import{r as i,b as pe}from"./react-core-spor8t4e.js";import{h as A,g as C,I as ge,m as ee,S as J,n as U,o as G,p as K,q as Q,B as $}from"./index-CNItTNil.js";import{a as ye}from"./data-utils-CsUIpaiA.js";/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],te=A("CalendarDays",be);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],ve=A("ChevronLeft",je);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],we=A("ChevronRight",Ne);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],Ce=A("Loader",Se);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],De=A("RefreshCw",Re);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],Fe=A("Search",Te),re=i.forwardRef(({className:t,...r},l)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:l,className:C("w-full caption-bottom rounded-lg text-sm",t),...r})}));re.displayName="Table";const le=i.forwardRef(({className:t,...r},l)=>e.jsx("thead",{ref:l,className:C("[&_tr]:border-b",t),...r}));le.displayName="TableHeader";const ne=i.forwardRef(({className:t,...r},l)=>e.jsx("tbody",{ref:l,className:C("[&_tr:last-child]:border-0",t),...r}));ne.displayName="TableBody";const Me=i.forwardRef(({className:t,...r},l)=>e.jsx("tfoot",{ref:l,className:C("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...r}));Me.displayName="TableFooter";const B=i.forwardRef(({className:t,...r},l)=>e.jsx("tr",{ref:l,className:C("border-b transition-colors hover:bg-muted/10 data-[state=selected]:bg-muted",t),...r}));B.displayName="TableRow";const oe=i.forwardRef(({className:t,...r},l)=>e.jsx("th",{ref:l,className:C("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...r}));oe.displayName="TableHead";const Y=i.forwardRef(({className:t,...r},l)=>e.jsx("td",{ref:l,className:C("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px] ",t),...r}));Y.displayName="TableCell";const ke=i.forwardRef(({className:t,...r},l)=>e.jsx("caption",{ref:l,className:C("mt-4 text-sm text-muted-foreground",t),...r}));ke.displayName="TableCaption";function ze({value:t,onChange:r}){return e.jsxs("div",{className:"relative w-full sm:w-[250px]",children:[e.jsx(ge,{placeholder:"Search",value:t,onChange:l=>r(l.target.value),className:"placeholder:text-[14px]"}),e.jsx(Fe,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400"})]})}const Ve=({filters:t,filterConfig:r,setFilters:l,onFilter:n,onReset:j,setLoading:o,setDynamicData:f})=>{const{search:w,dateRange:y,status:m,selects:c}=r.rederFilerOptions,u=r.mode||"static",s=r.dynamicCallbacks,[x,p]=i.useState(t.dateRange),[R,g]=i.useState(t.status),[T,D]=i.useState(t.customFilterValues);i.useEffect(()=>{if(t.search){const a=setTimeout(async()=>{var d;if(u==="dynamic"&&(s!=null&&s.onSearch)){o&&o(!0);try{const S=await((d=s==null?void 0:s.onSearch)==null?void 0:d.call(s,t.search));f&&S&&f(S)}catch{}finally{o&&o(!1)}}else n&&n()},500);return()=>clearTimeout(a)}else _()},[t.search]);const _=()=>{var a;if(u==="dynamic"&&(s!=null&&s.onSearch)){o&&o(!0);try{(a=s==null?void 0:s.onSearch)==null||a.call(s,"").then(d=>{f&&d&&f(d)})}catch{}finally{o&&o(!1)}}else n&&n()},z=(a,d)=>{p({...x,[a]:d||void 0})},I=a=>{g(a)},V=(a,d)=>{D({...T,[a]:d})},q=async()=>{const a={...t,dateRange:x,status:R,customFilterValues:T};if(l(a),n&&n(),u==="dynamic"&&(s!=null&&s.onFilterApply)&&f){o&&o(!0);try{const d=await s.onFilterApply(a);f(d)}catch{}finally{o&&o(!1)}}},b=async()=>{if(p({from:void 0,to:void 0}),g("all"),D({}),l({...t,search:"",status:"all",role:"",dateRange:{from:void 0,to:void 0},customFilterValues:{}}),j&&j(),u==="dynamic"&&(s!=null&&s.onFilterApply)&&f){o&&o(!0);try{const a=await s.onFilterApply({search:"",status:"all",role:"",dateRange:{from:void 0,to:void 0},customFilterValues:{}});f(a)}catch{}finally{o&&o(!1)}}};return e.jsx("div",{className:"flex flex-col gap-3 w-full",children:e.jsxs("div",{className:"flex items-end justify-between gap-4 flex-wrap text-[--primary-text]",children:[e.jsxs("div",{className:"flex items-end gap-2 flex-wrap",children:[y&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-start flex-col ",children:[e.jsx("span",{className:"text-sm whitespace-nowrap text-gray-500",children:"From Date"}),e.jsx(Z,{value:x.from?ee(x.from):null,onChange:a=>z("from",(a==null?void 0:a.toDate())||null),slotProps:{textField:{size:"small",sx:{borderRadius:"5px",width:"170px","& .MuiOutlinedInput-notchedOutline":{border:"none",borderRadius:"20px"}}}},slots:{openPickerIcon:te},format:"DD/MM/YYYY",className:"bg-[--filter-bg] text-[--filter-fg]"})]}),e.jsxs("div",{className:"flex items-start flex-col ",children:[e.jsx("span",{className:"text-sm whitespace-nowrap text-gray-500",children:"To Date"}),e.jsx(Z,{value:x.to?ee(x.to):null,onChange:a=>z("to",(a==null?void 0:a.toDate())||null),slotProps:{textField:{size:"small",sx:{borderRadius:"5px",width:"170px","& .MuiOutlinedInput-notchedOutline":{border:"none",borderRadius:"20px"}}}},slots:{openPickerIcon:te},format:"DD/MM/YYYY",className:"bg-[--filter-bg] text-[--filter-fg]"})]})]}),m&&m.options&&e.jsxs("div",{className:"flex items-start flex-col ",children:[e.jsxs("span",{className:"text-sm whitespace-nowrap text-gray-500",children:[m.label||"Status",":"]}),e.jsxs(J,{value:R,onValueChange:I,children:[e.jsx(U,{className:"w-[180px] bg-[--filter-bg] text-[--filter-fg] border-none h-10",children:e.jsx(G,{placeholder:m.placeholder||`Select ${m.label}`})}),e.jsx(K,{children:m.options.map(a=>e.jsx(Q,{value:a.value,children:a.label},a.value))})]})]}),c&&c.map(a=>e.jsxs("div",{className:"flex items-start flex-col ",children:[e.jsxs("span",{className:"text-sm whitespace-nowrap text-gray-500",children:[a.label,":"]}),e.jsxs(J,{value:T[a.id]||"",onValueChange:d=>V(a.id,d),children:[e.jsx(U,{className:"w-[180px] bg-[--filter-bg] text-[--filter-fg] border-none h-10",children:e.jsx(G,{placeholder:a.placeholder||`Select ${a.label}`})}),e.jsx(K,{children:a.options.map(d=>e.jsx(Q,{value:d.value,children:d.label},d.value))})]})]},a.id)),r.rederFilerOptions.applyAction&&r.rederFilerOptions.resetAction&&(n||j)&&e.jsxs("div",{className:"flex justify-end gap-2",children:[n&&e.jsx($,{onClick:q,size:"sm",variant:"default",className:"h-10",children:"Apply Filters"}),j&&e.jsxs($,{onClick:b,size:"sm",variant:"outline",className:"h-10 flex gap-1",children:[e.jsx(De,{size:16}),"Reset"]})]})]}),w&&e.jsx(ze,{value:t.search,onChange:a=>l({...t,search:a})})]})})},se=({text:t="Fetching Data..."})=>e.jsxs("div",{className:"flex justify-center items-center gap-2",children:[e.jsx(Ce,{className:"animate-spin",style:{animationDuration:"1.5s"}}),t]});function _e({currentPage:t,totalPages:r,pageSize:l,pageSizeOption:n,setPageSize:j,setCurrentPage:o,filteredDataLength:f,paginationMode:w,onPageChange:y}){const m=()=>{const s=[];if(r<=5)return Array.from({length:r},(p,R)=>R+1);if(t<=3){for(let p=1;p<=4;p++)s.push(p);s.push("..."),s.push(r)}else if(t>=r-2){s.push(1),s.push("...");for(let p=r-3;p<=r;p++)s.push(p)}else s.push(1),s.push("..."),s.push(t-1),s.push(t),s.push(t+1),s.push("..."),s.push(r);return s},c=s=>{s!==t&&(w==="dynamic"&&y&&y(s,l),o(s))},u=s=>{const x=Number(s);w==="dynamic"&&y&&(y(1,x),o(1)),j(x)};return e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between px-2",children:[e.jsxs("p",{className:"text-sm text-gray-700",children:["Showing ",f>0?(t-1)*l+1:0," to"," ",Math.min(t*l,f)," of ",f," entries"]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{children:e.jsxs(J,{value:l.toString(),onValueChange:s=>u(Number(s)),children:[e.jsx(U,{className:"text-black",children:e.jsxs("span",{className:"flex items-center",children:[e.jsx("span",{className:"mr-2 text-muted-foreground",children:"Rows per page:"}),e.jsx(G,{placeholder:"Select rows per page"})]})}),e.jsx(K,{children:n==null?void 0:n.map(s=>e.jsx(Q,{value:s.toString(),children:s},s))})]})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($,{variant:"outline",size:"sm",onClick:()=>c(Math.max(t-1,1)),disabled:t===1,className:"bg-white text-black",children:e.jsx(ve,{className:"h-4 w-4"})}),e.jsx("div",{className:"flex items-center gap-1",children:m().map((s,x)=>s==="..."?e.jsx("span",{className:"px-2",children:"..."},`ellipsis-${x}`):e.jsx($,{variant:t===s?"default":"outline",size:"sm",onClick:()=>c(Number(s)),className:t===s?"paginationActive":"paginationInactive",children:s},`page-${s}`))}),e.jsx($,{variant:"outline",size:"sm",onClick:()=>c(Math.min(t+1,r)),disabled:t===r,className:"bg-white text-black",children:e.jsx(we,{className:"h-4 w-4"})})]})]})]})}function Ie(t,r,l="asc"){const[n,j]=i.useState(r),[o,f]=i.useState(l);return{sortedData:i.useMemo(()=>!n||!Array.isArray(t)?t:[...t].sort((m,c)=>{if(!m||!c)return 0;const u=m[n],s=c[n];if(u===s)return 0;if(u==null)return 1;if(s==null)return-1;if(u instanceof Date&&s instanceof Date)return o==="asc"?u.getTime()-s.getTime():s.getTime()-u.getTime();const x=u<s?-1:1;return o==="asc"?x:-x}),[t,n,o]),sortColumn:n,sortDirection:o,toggleSort:m=>{j(m),f(n===m&&o==="asc"?"desc":"asc")}}}function Pe(t,r,l){const[n,j]=i.useState((l==null?void 0:l[0])||r),[o,f]=i.useState(1),w=i.useMemo(()=>{if(!Array.isArray(t))return[];const m=(o-1)*n;return t.slice(m,m+n)},[t,o,n]),y=i.useMemo(()=>Math.ceil(((t==null?void 0:t.length)||0)/n),[t,n]);return{paginatedData:w,totalPages:y,currentPage:o,pageSize:n,setPageSize:j,setCurrentPage:f}}const ae=t=>{const r=new Date(t);return isNaN(r.getTime())?"":r.toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit"})},Be=(t,r)=>{if(r.cell)return r.cell(t[r.id],t);const l=t[r.id]||"-";if(l instanceof Date||typeof l=="string"&&/^\d{4}-\d{2}-\d{2}|^\d{2}[-/]\d{2}[-/]\d{4}/.test(l)&&!isNaN(Date.parse(l)))return ae(l);if(typeof l=="object"&&l!==null)try{return JSON.stringify(l)}catch{return""}return String(l)};function qe({columns:t,tableWrapperClass:r,renderLeftSideActions:l,data:n,initialPageSize:j=10,defaultSortColumn:o,defaultSortDirection:f="asc",pageSizeOption:w=[10,15,20,25],onRowClick:y,paginationMode:m,filter:c,refreshAction:u,loading:s,renderComponents:x,onPageChange:p,totalRecords:R}){const[g,T]=i.useState({search:"",status:"all",role:"",dateRange:{from:void 0,to:void 0},customFilterValues:{}}),[D,_]=i.useState(!1),[z,I]=i.useState([]),V=(c==null?void 0:c.mode)||"static",q=s||D,b=V==="dynamic"&&z.length>0?z:n,{sortedData:a,sortColumn:d,sortDirection:S,toggleSort:O}=Ie(b,o,f),P=V==="static"?a.filter(h=>{if(g.search&&(c!=null&&c.filterOption)){const v=g.search.toLowerCase();if(!t.some(F=>{const M=h[F.id];return M==null?!1:String(M).toLowerCase().includes(v)}))return!1}if(c!=null&&c.dateFilterColumn&&g.dateRange){const v=c.dateFilterColumn,N=h[v]?new Date(h[v]):null;if(g.dateRange.from&&N){const F=new Date(g.dateRange.from);if(N<F)return!1}if(g.dateRange.to&&N){const F=new Date(g.dateRange.to);if(F.setHours(23,59,59,999),N>F)return!1}}if(c!=null&&c.statusFilerColumn&&g.status&&g.status!=="all"){const v=c.statusFilerColumn;if(h[v]!==g.status)return!1}for(const[v,N]of Object.entries(g.customFilterValues))if(N&&N!=="all"&&h[v]!==N)return!1;return!0}):a,{paginatedData:W,totalPages:ce,currentPage:H,pageSize:L,setPageSize:ie,setCurrentPage:E}=Pe(P,j,w),de=()=>{E(1)},he=h=>{ie(h),setTimeout(()=>{const v=Math.ceil(P.length/h);H>v&&E(1)},0)};i.useEffect(()=>{const h=Math.ceil(P.length/L);H>h&&E(1)},[P.length,L]);const ue=()=>{T({search:"",status:"all",role:"",dateRange:{from:void 0,to:void 0},customFilterValues:{}}),E(1),V==="dynamic"&&I([])},[me,xe]=i.useState(null),fe=h=>{xe(v=>v===h?null:h)};return e.jsxs("div",{className:"space-y-4 dynamic-table-container px-8 w-full",children:[u&&u.isRefreshButtonVisible&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx($,{onClick:u.onRefresh,variant:"outline",size:"sm",children:u.refreshButtonText?u.refreshButtonText:"Refresh Data"}),e.jsx("div",{children:u.isLoading&&e.jsx("span",{className:"text-blue-500",children:"Loading data..."})})]}),e.jsxs("div",{className:"flex sm:items-center justify-between w-full md:flex-row flex-col",children:[l&&e.jsx("div",{className:"flex-1 py-2",children:l()}),(c||x)&&e.jsxs("div",{className:"w-full sm:flex-1 items-center sm:py-2",children:[(c==null?void 0:c.filterOption)&&e.jsx("div",{className:"w-full sm:flex-1",children:e.jsx(Ve,{filters:g,filterConfig:c,setFilters:T,onFilter:de,onReset:ue,setLoading:_,setDynamicData:I})}),x&&e.jsx("div",{children:x})]})]}),e.jsx("div",{className:C("overflow-x-auto w-full bg-[--table-bg] rounded-lg shadow-sm",r),children:e.jsx("div",{className:"border border-[--table-border] border-slate-400 overflow-clip",children:e.jsxs(re,{className:"odz-table w-full overflow-auto",children:[e.jsx(le,{className:"bg-[--table-header]",children:e.jsx(B,{className:"odz-table-row bg-[#020B2D] text-white hover:bg-[#020B2D] p-3",children:t.map(h=>e.jsxs(oe,{className:C("min-w-40 odz-th border-r-2 border-[--table-border] border-none text-center text-white",h.sortable&&"cursor-pointer",h.className),onClick:()=>h.sortable&&O(h.id),children:[h.name,d===h.id&&e.jsx("span",{className:"ml-2",children:S==="asc"?"↑":"↓"})]},h.id))})}),e.jsx(ne,{className:"odz-table-body",children:q?e.jsx(B,{className:"odz-table-row p-3",children:e.jsx(Y,{className:"odz-table-cell",colSpan:t.length,children:e.jsx(se,{})})}):W.length>0?W.map((h,v)=>{var M,X;const N=(H-1)*L+v,F=me===N;return e.jsxs(pe.Fragment,{children:[e.jsx(B,{className:C("odz-table-row p-3","even:bg-blue-100 odd:bg-[#F6FBFF]",y&&"cursor-pointer hover:bg-gray-100"),onClick:()=>{t.some(k=>k.renderDetailPanel)&&fe(N),y==null||y(h)},children:t.map(k=>e.jsx(Y,{className:"odz-table-cell border-r-2 border-[--table-border] border-none text-center",children:Be(h,k)},`${N}-${k.key}`))}),F&&t.some(k=>k.renderDetailPanel)&&e.jsx(B,{className:"bg-[#F6FBFF] p-3",children:e.jsx(Y,{colSpan:t.length,className:"p-4",children:(X=(M=t.find(k=>k.renderDetailPanel))==null?void 0:M.renderDetailPanel)==null?void 0:X.call(M,h)})})]},N)}):e.jsx(B,{className:"odz-table-row",children:e.jsx(Y,{className:"odz-table-cell",colSpan:t.length,children:e.jsx("div",{className:"odz-table-cell-inner flex items-center justify-center space-x-2 py-20 text-primary",children:e.jsx(se,{})})})})})]})})}),(n==null?void 0:n.length)!==0&&e.jsx(_e,{currentPage:H,totalPages:ce,pageSize:L,pageSizeOption:w,setPageSize:he,setCurrentPage:E,filteredDataLength:P.length,paginationMode:m||"static",onPageChange:p,totalRecords:R||P.length})]})}function He({endpoint:t,initialPageSize:r=10,additionalParams:l={},initialData:n=[],dataPath:j="data",totalRecordsPath:o="totalRecords"}){const[f,w]=i.useState(n),[y,m]=i.useState(!1),[c,u]=i.useState(null),[s,x]=i.useState(1),[p,R]=i.useState(r),[g,T]=i.useState(n.length),D=async b=>{m(!0),u(null);try{const a={...b,...l},d=await ye.get(t,{params:a}),S=_(d.data,j)||[],O=_(d.data,o)||S.length;return w(S),T(O),S}catch(a){return u(a),[]}finally{m(!1)}};function _(b,a){return a?a.split(".").reduce((d,S)=>d?d[S]:void 0,b):b}const z=async(b,a=p)=>(x(b),await D({page:b,pageSize:a})),I=async b=>(R(b),x(1),await D({page:1,pageSize:b})),V=Math.max(1,Math.ceil(g/p));return{data:f,loading:y,error:c,currentPage:s,pageSize:p,totalRecords:g,totalPages:V,handlePageChange:z,handlePageSizeChange:I,loadInitialData:()=>D({page:s,pageSize:p}),setAdditionalParams:b=>(Object.assign(l,b),D({page:1,pageSize:p}))}}export{qe as D,He as u};
//# sourceMappingURL=useDynamicPagination-paL4eO_A.js.map
