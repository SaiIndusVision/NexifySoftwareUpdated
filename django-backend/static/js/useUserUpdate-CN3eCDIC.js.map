{"version":3,"file":"useUserUpdate-CN3eCDIC.js","sources":["../../../src/components/form/context/FormProvider.tsx","../../../src/components/form/wrapper/Spacer.tsx","../../../src/features/co-admin/hooks/useCreateUser.tsx","../../../src/features/co-admin/hooks/useUserUpdate.tsx"],"sourcesContent":["import { FormProvider as RHFFormProvider } from \"react-hook-form\";\n\nexport const FormProvider: React.FC<{ methods: any; children: React.ReactNode }> = ({ \n  methods, \n  children \n}) => (\n  <RHFFormProvider {...methods}>\n    {children}\n  </RHFFormProvider>\n);\n","import { cn } from \"@/utils/cn\";\n\ntype Props = {\n  children: React.ReactNode;\n  className?: string;\n};\n\nconst Spacer = ({ children, className }: Props) => {\n  return <div className={cn(\"flex flex-col gap-4\", className)}>{children}</div>;\n};\n\nexport default Spacer;\n","import { useMutation } from \"@tanstack/react-query\";\r\nimport { userApi } from \"../api/userApi\";\r\nimport { toast } from \"sonner\";\r\n\r\n// Request payload as per backend expectation\r\nexport interface UserCreationRequest {\r\n  first_name: string;\r\n  last_name: string;\r\n  email: string;\r\n  phone_number: number; // Changed to number to match form and API\r\n  password: string | null;\r\n  mac_address: string | null;\r\n  role_id: number;\r\n  is_active: boolean;\r\n  started_on: string;\r\n}\r\n\r\n// API response\r\ninterface UserApiResponse {\r\n  success: boolean;\r\n  message: string;\r\n}\r\n\r\nexport const useCreateUser = ({\r\n  onUserCreateSuccess,\r\n}: {\r\n  onUserCreateSuccess: (data: UserApiResponse) => void;\r\n}) => {\r\n  const { mutate, isPending, error } = useMutation<\r\n    UserApiResponse,\r\n    Error,\r\n    UserCreationRequest\r\n  >({\r\n    mutationFn: async (userData: UserCreationRequest) => {\r\n      const response = await userApi.userCreation(userData);\r\n      return response;\r\n    },\r\n    onSuccess: (data) => {\r\n      console.log(data)\r\n      toast.success(data.message || \"User created successfully\");\r\n      onUserCreateSuccess(data);\r\n    },\r\n    onError: (error) => {\r\n      console.log(error?.message)\r\n      toast.error(error.message\r\n        // error.message === \"Request failed with status code 409\"\r\n        //   ? \"Email already exists\"\r\n        //   : error.message || \"User creation failed\"\r\n      );\r\n    },\r\n  });\r\n\r\n  return { mutate, isLoading: isPending, error };\r\n};","import { useMutation } from \"@tanstack/react-query\";\r\nimport { userApi } from \"../api/userApi\";\r\nimport { toast } from \"sonner\";\r\n\r\n// Request payload as per backend expectation\r\nexport interface UserUpdationRequest {\r\n  first_name: string;\r\n  last_name: string;\r\n  email: string;\r\n  phone_number: string; // Changed to number to match form and API\r\n  // password: string | null;\r\n  mac_address: string | null;\r\n  role_id: number;\r\n  is_active: boolean;\r\n  started_on: string;\r\n}\r\n\r\n// API response\r\ninterface UserApiResponse {\r\n  success: boolean;\r\n  message: string;\r\n}\r\n\r\nexport const useUpdateUser = ({\r\n  user_id,\r\n  onUserUpdateSuccess,\r\n}: {\r\n  user_id: number; // âœ… Add this line\r\n  onUserUpdateSuccess: (data: UserApiResponse) => void;\r\n}) => {\r\n  const { mutate, isPending, error } = useMutation<\r\n    UserApiResponse,\r\n    Error,\r\n    UserUpdationRequest\r\n  >({\r\n    mutationFn: async (userData: UserUpdationRequest) => {\r\n      const response = await userApi.userUpdate(user_id,userData);\r\n      return response;\r\n    },\r\n    onSuccess: (data) => {\r\n      toast.success(data.message || \"User Updated successfully\");\r\n      onUserUpdateSuccess(data);\r\n    },\r\n    onError: (error) => {\r\n      toast.error(\r\n        error.message === \"Request failed with status code 409\"\r\n          ? \"Email already exists\"\r\n          : error.message || \"User Updation failed\"\r\n      );\r\n    },\r\n  });\r\n\r\n  return { mutate, isLoading: isPending, error };\r\n};"],"names":["FormProvider","methods","children","jsx","RHFFormProvider","Spacer","className","cn","useCreateUser","onUserCreateSuccess","mutate","isPending","error","useMutation","userData","userApi","data","toast","useUpdateUser","user_id","onUserUpdateSuccess"],"mappings":"yNAEO,MAAMA,EAAsE,CAAC,CAClF,QAAAC,EACA,SAAAC,CACF,IACGC,EAAA,IAAAC,EAAA,CAAiB,GAAGH,EAClB,SAAAC,CACH,CAAA,ECDIG,EAAS,CAAC,CAAE,SAAAH,EAAU,UAAAI,WAClB,MAAI,CAAA,UAAWC,EAAG,sBAAuBD,CAAS,EAAI,SAAAJ,EAAS,ECe5DM,EAAgB,CAAC,CAC5B,oBAAAC,CACF,IAEM,CACJ,KAAM,CAAE,OAAAC,EAAQ,UAAAC,EAAW,MAAAC,CAAA,EAAUC,EAInC,CACA,WAAY,MAAOC,GACA,MAAMC,EAAQ,aAAaD,CAAQ,EAGtD,UAAYE,GAAS,CACnB,QAAQ,IAAIA,CAAI,EACVC,EAAA,QAAQD,EAAK,SAAW,2BAA2B,EACzDP,EAAoBO,CAAI,CAC1B,EACA,QAAUJ,GAAU,CACV,QAAA,IAAIA,GAAAA,YAAAA,EAAO,OAAO,EACpBK,EAAA,MAAML,EAAM,OAIlB,CAAA,CACF,CACD,EAED,MAAO,CAAE,OAAAF,EAAQ,UAAWC,EAAW,MAAAC,CAAM,CAC/C,EC9BaM,EAAgB,CAAC,CAC5B,QAAAC,EACA,oBAAAC,CACF,IAGM,CACJ,KAAM,CAAE,OAAAV,EAAQ,UAAAC,EAAW,MAAAC,CAAA,EAAUC,EAInC,CACA,WAAY,MAAOC,GACA,MAAMC,EAAQ,WAAWI,EAAQL,CAAQ,EAG5D,UAAYE,GAAS,CACbC,EAAA,QAAQD,EAAK,SAAW,2BAA2B,EACzDI,EAAoBJ,CAAI,CAC1B,EACA,QAAUJ,GAAU,CACZK,EAAA,MACJL,EAAM,UAAY,sCACd,uBACAA,EAAM,SAAW,sBACvB,CAAA,CACF,CACD,EAED,MAAO,CAAE,OAAAF,EAAQ,UAAWC,EAAW,MAAAC,CAAM,CAC/C"}