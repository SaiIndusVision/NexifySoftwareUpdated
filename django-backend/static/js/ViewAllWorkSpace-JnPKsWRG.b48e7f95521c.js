import{j as t}from"./mui-BFA6lQrI.js";import{f as y,r as a}from"./react-core-CQlor4TK.js";import{a as g}from"./data-utils-7BzZlo9U.js";import{j as C,C as E}from"./index-DRlwla87.js";import{u as F}from"./state-management-hQ1z8sur.js";import"./ui-utils-DmSiVVjI.js";import"./radix-DpbSIyq2.js";import"./form-tools-D5DSvKKH.js";const W="/assets/png/design-stats-CmsCAPor.png",z=()=>{const{setTitle:h}=C(),r=y();a.useEffect(()=>{},[h]);const j=a.useMemo(()=>e=>e.auth,[]),l=F(j),c=a.useMemo(()=>({created_by:l==null?void 0:l.user_id}),[l==null?void 0:l.user_id]);console.log(c);const[n,o]=a.useState([]),[i,d]=a.useState([]),[_,m]=a.useState(!1),[D,x]=a.useState(null),b=async()=>{var e;m(!0),x(null);try{const s=await g.get("http://localhost:8000/api/workspace/",{headers:{Accept:"application/json"}});(e=s.data)!=null&&e.results?o(s.data.results):o([])}catch(s){x(s instanceof Error?s.message:"Unknown error")}finally{m(!1)}},p=async()=>{var e;try{const s=await g.get("http://localhost:8001/api/workspace/",{params:c,headers:{Accept:"application/json"}});(e=s.data)!=null&&e.results?d(s.data.results):d([])}catch(s){console.error("Failed to fetch global workspaces",s)}};a.useEffect(()=>{b(),p()},[]),a.useEffect(()=>{console.log("Workspace data updated:",n),console.log("global workspace data:",i)},[n,i]);const v=e=>{const s=i.find(N=>{var u,f;return((u=N.name)==null?void 0:u.trim().toLowerCase())===((f=e.name)==null?void 0:f.trim().toLowerCase())});console.log("Matched global workspace:",s),localStorage.setItem("globalWorkspaceData",JSON.stringify(s)),r(`/client/workspaces/${e==null?void 0:e.id}`)};return console.log("global workspace data:",i),t.jsxs("div",{className:"flex flex-col py-4",children:[t.jsx("div",{className:" mx-auto mb-8",children:t.jsx("div",{className:" bg-opacity-25 flex justify-center items-center relative z-10",children:t.jsxs("div",{className:"p-8 w-full min-w-[calc(90vw)] rounded-2xl border-2 border-gray-200 flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-blue-900",children:"Welcome! Lets get started"}),t.jsxs("p",{className:"text-gray-400",children:["Create your first ",t.jsx("span",{className:"text-gray-500 font-semibold",children:"workspace"})]})]}),t.jsx("div",{children:t.jsx("button",{onClick:()=>r("/client/workspaces/create"),className:"bg-primary hover:bg-green-600 text-white py-2 px-4 rounded-full flex items-center gap-2",children:"Create a workspace"})})]})})}),t.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[t.jsx("div",{className:"flex flex-wrap -mx-2  lg:w-4/6",children:n.map(e=>t.jsx("div",{className:"w-full md:w-1/2 p-2",children:t.jsx("div",{onClick:()=>v(e),className:`${e!=null&&e.is_activated?"bg-[#EFF2FF]":"bg-[#FFEEE0]"} rounded-lg shadow-sm border border-gray-100 h-auto`,children:t.jsxs("div",{className:"flex gap-4 p-4",children:[t.jsx("div",{className:`${e!=null&&e.is_activated?"bg-[#CED7FD] ":"bg-[#FFCA9F]"} rounded-md w-24 h-24 flex items-center justify-center`,children:t.jsx("span",{className:`${e!=null&&e.is_activated?"text-[#798CDC] ":"text-[#E66A05]"} text-4xl font-semibold`,children:"W"})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"flex justify-end items-end",children:t.jsx("button",{className:"text-blue-400 ",children:e!=null&&e.is_activated?t.jsx(t.Fragment,{children:t.jsx(E,{size:20})}):t.jsx(t.Fragment,{children:t.jsx("span",{className:"bg-[#E66A05] text-white px-2 py-1 rounded-full text-sm",children:"Activation pending"})})})}),t.jsx("h3",{className:"font-medium text-gray-800",children:e.name}),t.jsxs("div",{className:"mt-1 space-y-1",children:[t.jsxs("p",{className:"text-sm text-gray-600",children:["Creation date:"," ",t.jsx("span",{className:"bg-blue-600 text-white p-1 rounded-full text-sm",children:e==null?void 0:e.created_at.split("T")[0]})]}),t.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Total SKU: ",e==null?void 0:e.sku_count,"/",e==null?void 0:e.sku_total_count]})]})]})]})})},e.id))}),t.jsx("div",{className:"flex items-start justify-center rounded-lg lg:w-2/6 ",children:t.jsx("div",{className:"text-center",children:t.jsx("img",{src:W,alt:"Workspace illustration",className:"max-w-full h-auto mx-auto"})})})]})]})};export{z as default};
