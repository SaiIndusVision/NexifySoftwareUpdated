{"version":3,"file":"ViewAllSKU-D08jvqAf.js","sources":["../../../src/features/auth/schemas/createVersion.schema.ts","../../../src/features/client/hooks/useCreateVersion.tsx","../../../src/features/auth/components/CreateNewVersionForm.tsx","../../../src/assets/images/VersionFolder.png","../../../src/features/client/pages/workspace/ViewAllSKU.tsx"],"sourcesContent":["\r\nimport * as z from \"zod\";\r\n\r\nexport const createVersionSchema = z.object({\r\n  name: z.string().min(1, \"Version name is required\").max(100, \"Maximum 100 characters allowed\"),\r\n  sku: z.number().nullable().optional(),\r\n});\r\n\r\nexport type CreateVersionSchema = z.infer<typeof createVersionSchema>;\r\n","import { useMutation } from \"@tanstack/react-query\";\r\nimport axios from \"axios\";\r\nimport { CreateVersionSchema } from \"../../auth/schemas/createVersion.schema\";\r\n\r\nexport const useCreateVersion = () => {\r\n    return useMutation({\r\n        mutationFn: async (data: CreateVersionSchema) => {\r\n            const response = await axios.post(\"https://ac4ee0054010e6ee7a052c425e401a13.serveo.net/api/versions/\", data); // Replace with actual API URL\r\n            return response.data;\r\n        },\r\n    });\r\n};\r\n","import { useEffect, useState } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { zodResolver } from \"@hookform/resolvers/zod\";\r\nimport { createVersionSchema, CreateVersionSchema } from \"../schemas/createVersion.schema\";\r\nimport { useCreateVersion } from \"../../client/hooks/useCreateVersion\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport {\r\n  Form, FormField, FormItem, FormControl, FormMessage\r\n} from \"@/components/ui/form\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Loader2 } from \"lucide-react\";\r\nimport { toast } from \"sonner\";\r\nconst CreateNewVersionForm = ({ sku }) => {\r\n  const { mutate, isLoading } = useCreateVersion();\r\n  const form = useForm<CreateVersionSchema>({\r\n    resolver: zodResolver(createVersionSchema),\r\n    defaultValues: {\r\n      name: \"\",\r\n      sku: sku,\r\n    },\r\n  });\r\n\r\n\r\n  const handleSubmit = (values: CreateVersionSchema) => {\r\n    const payload = {\r\n      name: values.name,\r\n      sku: values.sku,  // convert workspaceId to number, default 0\r\n    };\r\n    console.log(payload)\r\n    mutate(payload, {\r\n      onSuccess: () => {\r\n        toast.success(\"Version created successfully\");\r\n        form.reset();\r\n        window.location.reload();\r\n      },\r\n      onError: () => {\r\n        toast.error(\"Failed to create Version\");\r\n      },\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Form {...form}>\r\n      <div className=\"mb-8\">\r\n        <div className=\"text-2xl font-secondary font-bold text-[#062393]\">Create a New Version</div>\r\n        <div className=\"text-sm font-secondary  font-normal \">Fill all the fields {sku}</div>\r\n      </div>\r\n      <form onSubmit={form.handleSubmit(handleSubmit)} className=\"space-y-6\">\r\n        <FormField\r\n          control={form.control}\r\n          name=\"name\"\r\n          render={({ field }) => (\r\n            <FormItem>\r\n              <FormControl>\r\n                <Input {...field} placeholder=\"Name of Version*\" className=\"rounded-full w-full\" />\r\n              </FormControl>\r\n              <FormMessage />\r\n            </FormItem>\r\n          )}\r\n        />\r\n\r\n        <Button type=\"submit\" disabled={isLoading} className=\"w-full rounded-full\">\r\n          {isLoading ? (\r\n            <>\r\n              <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\r\n              Please wait\r\n            </>\r\n          ) : (\r\n            \"Create New Version\"\r\n          )}\r\n        </Button>\r\n      </form>\r\n    </Form>\r\n  );\r\n};\r\n\r\nexport default CreateNewVersionForm;\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG4AAABWCAYAAAAucqM7AAAACXBIWXMAABCcAAAQnAEmzTo0AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAMESURBVHgB7d0/TxRBHMbx3wx70WiIdIr/cvYaeQEmyhugtzBIbWODFCYKJYoJdpSeDYkVWphYcRQWdBIruwWNWOnSyMHezrizMscenGiBsM/u80kudzu5S0i+zMxuNSp4sP5YWTspGMJYq2GZHgyl4jRQNKdeM3ZRJtbrUnFa8DBeStXGv1p/8f1RvxTVx29GRho/ZWOr8+dWetmEmXHXzml5M3pKzpxQfqjSMw9qqWS8XXB7HOP9hnhzwngCGs6pejzYcE6V40GHc6oaD+Y57m96PedZk4xJybSDIHTPrqUJ5/SIV0rpP+Qw/FKZ12PZLCl9K5CS8fEevmtJmaxGVj5vmM516cI5Pl6ZTC9tpa/tznWplsoqYThQDAeK4UAxHCiGA8VwoBgOFMOBYjhQDAeK4UAxHCiGA8VwoBgOFMOBYjhQDAeK4UAxHCiGA8VwoBgOFMOBYjhQDAeK4UAxHCiGA8VwoBgOFMOBYjhQDAeK4UAxHCiGA8VwoBgOFMOBYjhQDAeK4UAxHCiGA8VwoBgOFMOBYjhQDAeK4UAxHCiGA8VwoBgOFMOB0mIl8hcbrXIfJoQs30YpFWlREvoBdxoUFVO+jbXJB22NWfIDbz/FQsWzFhl5v5p0roMgCNM9zi74gfmVNpfLAspHS7e2Zmt6MNTtZ5eafp9z0eaWt4WKw822/ClWotWL7G3ncsqPzy3H3OsKxEVz8XaE8ZPBhvuQhYtnzs+mb0332c26O68281+mY+LOjJtfyd13KDXpP3ae4/q0GvNLpos28nKz+0d0ZNzkufe61bVEKmOn/GzLrvM/qI1/GRKrF9PRAT92+3otfQVyo17Kwx0Lxd9juO2q6ybR2kY8c+Fu/rv7ToE9ObFeT9w52iL1/PjlAS1Xz+rsGEs6XGuR3XfLv8s8j59evL93tOfxvVm8xEyma+qo0HHJzjHP7vp7OPDc5VzAm7JnBtL/YdPnNKX0wul4sxHNXon+9L1/PjDb7X/GmLqSviGhQ6V03w9jtlf7k6R5UKy8X8WBPRteZdGpAAAAAElFTkSuQmCC\"","import React, { useState, useEffect, useCallback, memo } from \"react\";\r\nimport { usePageTitle } from \"@/hooks/usePageTitle\";\r\nimport { useParams, useLocation, useNavigate } from \"react-router-dom\";\r\nimport { ConfirmationUser } from \"@/components/ui/ConfirmationUser\";\r\nimport CreateNewSkuForm from \"@/features/auth/components/CreateNewSkuForm\"\r\nimport CreateNewVersionForm from \"@/features/auth/components/CreateNewVersionForm\"\r\nimport { toast } from \"sonner\";\r\nimport { cn } from \"@/utils/cn\";\r\nimport { localUrl } from \"@/core/constant/apis\";\r\nimport axios from \"axios\";\r\n// import versionFolder from \"@assets/images/VersionFolder.png\"\r\nimport versionFolder from \"../../../../assets/images/VersionFolder.png\"\r\n\r\nimport { initialWorkSpaceData, initialSkuData, initialSkuVersionData } from './mockData'\r\nconst useScreenSize = () => {\r\n  const [screenWidth, setScreenWidth] = useState(window.innerWidth);\r\n  useEffect(() => {\r\n    const handleResize = () => setScreenWidth(window.innerWidth);\r\n    window.addEventListener(\"resize\", handleResize);\r\n    return () => window.removeEventListener(\"resize\", handleResize);\r\n  }, []);\r\n  return screenWidth;\r\n};\r\n\r\n\r\nconst ViewAllSku: React.FC = () => {\r\n  const API_BASE = 'https://ac4ee0054010e6ee7a052c425e401a13.serveo.net/api';\r\n\r\n  const [isMenuOpen, setIsMenuOpen] = useState<number | null>(null);\r\n  const screenWidth = useScreenSize();\r\n  const { id, workspaceId, skuId } = useParams();\r\n  console.log(workspaceId)\r\n  console.log(skuId)\r\n\r\n  const isEditMode = !!id;\r\n  const { setTitle } = usePageTitle();\r\n  const location = useLocation();\r\n  const selectedRow = (location.state as any)?.selectedRow || null;\r\n  // inside ViewAllSku component\r\n  const navigate = useNavigate();\r\n  const AddNewSKUItem = memo(({ icon: Icon }: { icon?: React.ElementType }) => {\r\n    const [isLoading, setIsLoading] = useState(false);\r\n\r\n    const handleCreateSKU = async () => {\r\n      setIsLoading(true);\r\n      try {\r\n        toast.success(\"SKU created successfully\");\r\n      } catch (error) {\r\n        toast.error(\"Failed to create SKU\");\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    return (\r\n      <ConfirmationUser\r\n        title=\"\"\r\n        description={<>\r\n          <CreateNewSkuForm />\r\n        </>}\r\n        onConfirm={handleCreateSKU}\r\n        isLoading={isLoading}\r\n      >\r\n\r\n        <p\r\n          className={`text-md text-center ${skus.length < 5 ? \"text-green-600\" : \"text-gray-500\"\r\n            }`}\r\n        >\r\n          {skus.length < 5\r\n            ? \"Click to add more SKUs\"\r\n            : \"Contact Indus Vision to add more SKUs\"}\r\n          <br />\r\n          {skus.length}/5 left to create\r\n        </p>\r\n      </ConfirmationUser>\r\n    );\r\n  });\r\n\r\n  const WorkSpaceValidation = memo(({ row, sku, icon: Icon, open }: { icon?: React.ElementType }) => {\r\n    // const [isLoading, setIsLoading] = useState(false);\r\n    // const [open, setOpen] = useState(true); // üëà opens automatically\r\n    const [isDialogOpen, setIsDialogOpen] = useState(open ?? false); // open on mount if true\r\n    const [isLoading, setIsLoading] = useState(false);\r\n\r\n    useEffect(() => {\r\n      if (open) {\r\n        setIsDialogOpen(true); // auto-open if activated\r\n      }\r\n    }, [open]);\r\n\r\n    const handleCreateSKU = async () => {\r\n      setIsLoading(true);\r\n      try {\r\n        toast.success(\"SKU created successfully\");\r\n\r\n      } catch (error) {\r\n        toast.error(\"Failed to create SKU\");\r\n      } finally {\r\n        setIsLoading(false);\r\n        setIsDialogOpen(false);\r\n        // setOpen(false); // close dialog on confirm\r\n      }\r\n    };\r\n\r\n    return (\r\n      <ConfirmationUser\r\n        title=\"\"\r\n        // description={<DetailPanelFieldEngineer row={row} />}\r\n        description={<CreateNewVersionForm sku={sku} />}\r\n        onConfirm={handleCreateSKU}\r\n        isLoading={isLoading}\r\n        open={open}\r\n        onOpenChange={setIsDialogOpen}\r\n      >\r\n        {/* <p className={`text-md text-center text-gray-500}`}> */}\r\n        {/* {skus.length < 5\r\n              ? \"Click to add more SKUs\"\r\n              : \"Contact Indus Vision to add more SKUs\"}\r\n            <br />\r\n            {skus.length}/5 left to create */}\r\n        {/* No Data to show */}\r\n        {/* </p> */}\r\n      </ConfirmationUser>\r\n    );\r\n  });\r\n\r\n  // const filteredWorkspaces = initialWorkSpaceData?.results.filter(\r\n  //   (workspace) => workspace.id == workspaceId\r\n  // );\r\n  // console.log(filteredWorkspaces)\r\n  // const [workspaceData, setWorkspaceData] = useState<any[]>(filteredWorkspaces[0] || []);\r\n\r\n  const [workspaceData, setWorkspaceData] = useState<any[]>([]);\r\n  const fetchWorkspace = async () => {\r\n\r\n    try {\r\n      const response = await axios.get(\r\n        `https://ac4ee0054010e6ee7a052c425e401a13.serveo.net/api/workspace/${workspaceId}/`,\r\n        {\r\n          headers: {\r\n            Accept: 'application/json',\r\n          },\r\n        }\r\n      );\r\n\r\n      if (response.data?.results) {\r\n        setWorkspaceData(response.data.results);\r\n      } else {\r\n        setWorkspaceData([]);\r\n      }\r\n    } catch (err) {\r\n      console.log(err)\r\n\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchWorkspace();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    console.log('Workspace data updated:', workspaceData);\r\n  }, [workspaceData]);\r\n\r\n  // const [skus, setSkus] = useState<any[]>(initialSkuData?.results || []);\r\n\r\n  const [skus, setSkus] = useState([]);\r\n\r\n  const versionsMap: Record<number, any[]> = {};\r\n\r\n  const vm =\r\n    skus.map(async (sku) => {\r\n      const versionRes = initialSkuVersionData?.results.filter(\r\n        (v) => v.sku_id === sku.id\r\n      );\r\n      versionsMap[sku.id] = versionRes;\r\n    })\r\n\r\n  console.log(\"versionsMap\", versionsMap);\r\n\r\n\r\n  // const [skuVersions, setSkuVersions] = useState({} || vm); // { [skuId]: version[] }\r\n  const [skuVersions, setSkuVersions] = useState({}); // { [skuId]: version[] }\r\n  // useEffect(() => {\r\n  //   const versionsMap: Record<number, any[]> = {};\r\n\r\n  //   skus.forEach((sku) => {\r\n  //     const versions = initialSkuVersionData?.results.filter(\r\n  //       (v) => v.sku_id === sku.id\r\n  //     );\r\n  //     versionsMap[sku.id] = versions || [];\r\n  //   });\r\n\r\n  //   setSkuVersions(versionsMap);\r\n  // }, [skus, initialSkuVersionData]);\r\n\r\n\r\n  const fetchSkusAndVersions = async () => {\r\n    try {\r\n      // 1. Get all SKUs for workspace 1\r\n      const skuRes = await axios.get(`${API_BASE}/sku/?workspace_id=${workspaceId}`);\r\n      const skuList = skuRes.data.results;\r\n      setSkus(skuList);\r\n\r\n      // 2. For each SKU, get its versions\r\n      const versionsMap = {};\r\n      await Promise.all(\r\n        skuList.map(async (sku) => {\r\n          const versionRes = await axios.get(`${API_BASE}/versions/?sku=${sku.id}`);\r\n          versionsMap[sku.id] = versionRes.data.results;\r\n        })\r\n      );\r\n\r\n      setSkuVersions(versionsMap);\r\n    } catch (error) {\r\n      console.error('Error fetching SKU data:', error);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchSkusAndVersions()\r\n  }, [workspaceId])\r\n\r\n  const placeholderImage = \"https://fibregridstorage.blr1.digitaloceanspaces.com/Fibregrid_projects/FY_25-26/Agriculture%20Projects/1_AGR_25-26_02_[Ekfrazo]/stage%204/Images/nexify-placeholder-img.png\";\r\n\r\n  const toggleMenu = (index: number) => {\r\n    setIsMenuOpen(isMenuOpen === index ? null : index);\r\n  };\r\n\r\n\r\n  const DetailPanelFieldEngineer = ({ row }: { row: any }) => {\r\n\r\n    return (\r\n      <div className=\"p-4 rounded-md transition-all duration-300\">\r\n        <h3 className=\"font-medium text-lg mb-4\">\r\n          Workspace: {row.name} (ID: {workspaceData.id})\r\n        </h3>\r\n\r\n        <div className=\"space-y-2\">\r\n          <>\r\n            <PhoneVerificationInput workspaceId={workspaceData.id} />\r\n            <ActivationValidationInput workspaceId={workspaceData.id} />\r\n          </>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const PhoneVerificationInput = ({ workspaceId }: { workspaceId: number }) => {\r\n    const [phoneNumber, setPhoneNumber] = useState(\"\");\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    const handleVerifyPhone = async () => {\r\n      setLoading(true);\r\n      try {\r\n        const res = await fetch(\"http://localhost:8001/api/field-assistant-verification/\", {\r\n          method: \"POST\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n          body: JSON.stringify({\r\n            workspace_id: workspaceId,\r\n            phone_number: phoneNumber,\r\n          }),\r\n        });\r\n        const data = await res.json();\r\n        alert(`‚úÖ Phone verified: ${data.message}`);\r\n      } catch (error) {\r\n        alert(\"‚ùå Phone verification failed\");\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    return (\r\n      <div className=\"flex flex-col space-y-2\">\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Phone Number\"\r\n          className=\"border p-1 rounded-full\"\r\n          value={phoneNumber}\r\n          onChange={(e) => setPhoneNumber(e.target.value)}\r\n        />\r\n        <button\r\n          className=\"bg-blue-500 text-white p-1 rounded-full disabled:opacity-50\"\r\n          onClick={handleVerifyPhone}\r\n          disabled={loading || !phoneNumber}\r\n        >\r\n          {loading ? \"Verifying...\" : \"Verify\"}\r\n        </button>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const ActivationValidationInput = ({ workspaceId }: { workspaceId: number }) => {\r\n    const [activationKey, setActivationKey] = useState(\"\");\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    const handleValidateKey = async () => {\r\n      setLoading(true);\r\n      try {\r\n        const res = await fetch(\"http://localhost:8001/api/workspace-validate/\", {\r\n          method: \"POST\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n          body: JSON.stringify({\r\n            workspace_id: workspaceId,\r\n            activation_key: activationKey,\r\n          }),\r\n        });\r\n        const data = await res.json();\r\n        alert(`‚úÖ Activation validated: ${data.message}`);\r\n      } catch (error) {\r\n        alert(\"‚ùå Activation validation failed\");\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    return (\r\n      <div className=\"flex flex-col space-y-2 my-2\">\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Activation Key\"\r\n          className=\"border p-1 rounded-full\"\r\n          value={activationKey}\r\n          onChange={(e) => setActivationKey(e.target.value)}\r\n        />\r\n        <button\r\n          className=\"bg-green-600 text-white p-1 rounded-full disabled:opacity-50\"\r\n          onClick={handleValidateKey}\r\n          disabled={loading || !activationKey}\r\n        >\r\n          {loading ? \"Validating...\" : \"Validate\"}\r\n        </button>\r\n      </div>\r\n    );\r\n  };\r\n  const [expandedSkuId, setExpandedSkuId] = useState<number | null>(null);\r\n  const [openVersion, setOpenVersion] = useState(false);\r\n  const [selectedVersion, setSelectedVersion] = useState<string | null>(null);\r\n  console.log(selectedVersion)\r\n  return (\r\n    <>\r\n      <div className=\"px-4\">\r\n        {/* Expanded SKU View (not inside the grid) */}\r\n        {expandedSkuId ? (\r\n          skus\r\n            .filter((sku) => sku.id === expandedSkuId)\r\n            .map((sku) => (\r\n              <div key={sku.id} className=\"w-full\">\r\n                <div className=\"w-full flex gap-8 items-center\">\r\n                  <button\r\n                    onClick={() => {\r\n                      setExpandedSkuId(null);\r\n                      setSelectedVersion(null);\r\n                    }}\r\n                    className=\"mb-4 px-4 py-2 bg-gray-200 hover:bg-gray-300 text-sm rounded-lg transition\"\r\n                  >\r\n                    ‚Üê Back\r\n                  </button>\r\n                  <button\r\n                    onClick={() => setOpenVersion(true)}\r\n                    className=\"mb-4 text-white px-4 py-2 bg-blue-600 hover:bg-blue-500 text-sm rounded-lg transition\"\r\n                  >\r\n                    <WorkSpaceValidation open={openVersion} sku={sku.id} />\r\n                    Create Version\r\n                  </button>\r\n                </div>\r\n\r\n                {/* Version Cards */}\r\n                {!selectedVersion && (\r\n                  <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-3 mb-6\">\r\n                    {(skuVersions[sku.id] || []).map((ver) => (\r\n                      <div\r\n                        key={ver.id}\r\n                        onClick={() => {\r\n                          setSelectedVersion(ver.id);\r\n                          navigate(\r\n                            `/client/workspaces/${workspaceId}/sku/${sku.id}?version=${ver.id}&tab=SKU+data`\r\n                          );\r\n                        }}\r\n                        className=\"flex items-center justify-center flex-col gap-2 p-3 text-center rounded-lg shadow hover:bg-gray-100 cursor-pointer\"\r\n                      >\r\n                        <img src={versionFolder} alt=\"\" />\r\n                        <h4 className=\"text-base font-medium\">{ver.name}</h4>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n\r\n                {/* Selected Version Detail */}\r\n                {selectedVersion && (\r\n                  <div className=\"p-4 border rounded-lg shadow bg-gray-100\">\r\n                    <p className=\"text-sm mb-2\">Selected Version ID: {selectedVersion}</p>\r\n                    <button\r\n                      onClick={() => setSelectedVersion(null)}\r\n                      className=\"px-4 py-1 bg-red-500 text-white rounded hover:bg-red-600 text-sm\"\r\n                    >\r\n                      Clear Selection\r\n                    </button>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            ))\r\n        ) : (\r\n          <>\r\n            {/* SKU Grid View */}\r\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4\">\r\n              {skus.map((sku, index) => (\r\n                <div key={sku.id} className=\"w-full\">\r\n                  <div\r\n                    onClick={() => {\r\n                      setExpandedSkuId(sku.id);\r\n                      setSelectedVersion(null);\r\n                    }}\r\n                    className=\"relative bg-gray-200 p-4 rounded-lg shadow-sm flex h-38 gap-4 cursor-pointer mb-2\"\r\n                  >\r\n                    <div className=\"w-48 h-full rounded-2xl\">\r\n                      <img\r\n                        src={placeholderImage}\r\n                        alt=\"SKU Image\"\r\n                        className=\"w-full h-full rounded-2xl\"\r\n                      />\r\n                    </div>\r\n                    <div className=\"w-[90%]\">\r\n                      <h3 className=\"text-lg font-semibold\">{sku.name}</h3>\r\n                      <p className=\"text-sm text-gray-500\">{sku.tag_name}</p>\r\n                    </div>\r\n                    <div className=\"absolute top-2 right-2\">\r\n                      <button\r\n                        onClick={(e) => {\r\n                          e.stopPropagation();\r\n                          toggleMenu(index);\r\n                        }}\r\n                        className=\"text-gray-500\"\r\n                      >\r\n                        <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                          <circle cx=\"12\" cy=\"5\" r=\"1.5\" fill=\"currentColor\" />\r\n                          <circle cx=\"12\" cy=\"12\" r=\"1.5\" fill=\"currentColor\" />\r\n                          <circle cx=\"12\" cy=\"19\" r=\"1.5\" fill=\"currentColor\" />\r\n                        </svg>\r\n                      </button>\r\n                      {isMenuOpen === index && (\r\n                        <div className=\"absolute right-0 mt-2 w-32 bg-white rounded-lg shadow-sm z-10\">\r\n                          <ul className=\"py-1\">\r\n                            <li className=\"px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 cursor-pointer\">Rename</li>\r\n                            <li className=\"px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 cursor-pointer\">Merge</li>\r\n                            <li className=\"px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 cursor-pointer\">Delete</li>\r\n                          </ul>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n\r\n              {/* Add New SKU block */}\r\n              <div\r\n                className={`p-4 rounded-lg flex flex-col items-center justify-center border-dotted border-2 ${skus.length < 5\r\n                  ? \"border-green-500 cursor-pointer\"\r\n                  : \"border-gray-300\"\r\n                  }`}\r\n              >\r\n                {skus.length < 5 ? (\r\n                  <AddNewSKUItem />\r\n                ) : (\r\n                  <p\r\n                    className={`text-md text-center ${skus.length < 5 ? \"text-green-600\" : \"text-gray-500\"\r\n                      }`}\r\n                  >\r\n                    {skus.length < 5\r\n                      ? \"Click to add more SKUs\"\r\n                      : \"Contact Indus Vision to add more SKUs\"}\r\n                  </p>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </>\r\n        )}\r\n      </div>\r\n\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ViewAllSku;"],"names":["createVersionSchema","z.object","z.string","z.number","useCreateVersion","useMutation","data","axios","CreateNewVersionForm","sku","mutate","isLoading","form","useForm","zodResolver","handleSubmit","values","payload","toast","jsxs","Form","jsx","FormField","field","FormItem","FormControl","Input","FormMessage","Button","Fragment","Loader2","versionFolder","useScreenSize","screenWidth","setScreenWidth","useState","useEffect","handleResize","ViewAllSku","API_BASE","isMenuOpen","setIsMenuOpen","id","workspaceId","skuId","useParams","usePageTitle","_a","useLocation","navigate","useNavigate","AddNewSKUItem","memo","Icon","setIsLoading","handleCreateSKU","ConfirmationUser","CreateNewSkuForm","skus","WorkSpaceValidation","row","open","isDialogOpen","setIsDialogOpen","workspaceData","setWorkspaceData","fetchWorkspace","response","err","setSkus","versionsMap","versionRes","initialSkuVersionData","v","skuVersions","setSkuVersions","fetchSkusAndVersions","skuList","error","placeholderImage","toggleMenu","index","expandedSkuId","setExpandedSkuId","openVersion","setOpenVersion","selectedVersion","setSelectedVersion","ver","e"],"mappings":"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"}