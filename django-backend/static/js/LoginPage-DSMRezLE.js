import{j as e}from"./mui-BFA6lQrI.js";import{A as v}from"./AuthLayout-itFYPbID.js";import{f as w,b as L,L as x}from"./react-core-CQlor4TK.js";import{b as N,s as p,d as b}from"./form-tools-D5DSvKKH.js";import{a as k,u as r,s as F,F as E,b as h,c as g,d as j,I as _,e as y,B as P,L as C,t as S}from"./index-Dekx5HmU.js";import{u as A}from"./data-utils-7BzZlo9U.js";import{i as I}from"./state-management-hQ1z8sur.js";import{a as D,E as B}from"./eye--LX_zl1Z.js";import"./ui-utils-DmSiVVjI.js";import"./radix-BHg8RD76.js";const q=()=>{const t=I(),n=w(),{mutate:l,isPending:i,error:a}=A({mutationFn:k.loginUser,onSuccess:s=>{t(F({role_name:s.role_name,user_id:s.user_id,first_name:s.first_name,last_name:s.last_name,email:s.email,user_created_date:s.user_created_date,access_token:s.access_token,refresh_token:s.refresh_token,secret_key_verified:s.secret_key_verified})),s.message=="Login successful"?s.role_name=="Admin"?r.error("Invalid Credentials"):(r.success("Login successful"),s.secret_key_verified?n("/client/workspaces"):n("/client/secret-key")):r.error("Invalid user role")},onError:s=>{var o,m,c,d,u,f;console.log(s),((m=(o=s==null?void 0:s.response)==null?void 0:o.data)==null?void 0:m.message)=="Invalid email or password"?r.error(((d=(c=s.response)==null?void 0:c.data)==null?void 0:d.message)||"Invalid email or password"):r.error(((f=(u=s==null?void 0:s.response)==null?void 0:u.data)==null?void 0:f.message)||"Login failed")}});return{mutate:l,isLoading:i,error:a}},M=N({email:p().min(1,"Email is required").email("Please enter a valid email"),password:p().min(1,"Password is required")}),O=()=>{const[t,n]=L.useState(!1),{mutate:l,isLoading:i}=q(),a=b({resolver:S(M),defaultValues:{email:"",password:""}}),s=o=>{l(o)};return e.jsxs(E,{...a,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"text-2xl font-secondary font-bold text-[#062393]",children:"Welcome Back!"}),e.jsx("div",{className:"text-sm font-secondary  font-normal ",children:"Let's get started"})]}),e.jsxs("form",{onSubmit:a.handleSubmit(s),className:"space-y-6",children:[e.jsx(h,{control:a.control,name:"email",render:({field:o})=>e.jsxs(g,{children:[e.jsx(j,{children:e.jsx(_,{...o,type:"email",placeholder:"Email Address*",autoComplete:"off",hasError:!!a.formState.errors.email,className:"rounded-full"})}),e.jsx(y,{})]})}),e.jsx(h,{control:a.control,name:"password",render:({field:o})=>e.jsxs(g,{children:[e.jsx(j,{children:e.jsxs("div",{className:"relative",children:[e.jsx(_,{...o,type:t?"text":"password",placeholder:"Password*",autoComplete:"off",hasError:!!a.formState.errors.password,className:"rounded-full"}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center hover:text-accent-foreground",onClick:()=>n(!t),children:t?e.jsx(D,{className:"h-5 w-5 text-muted-foreground"}):e.jsx(B,{className:"h-5 w-5 text-muted-foreground"})})]})}),e.jsx(y,{})]})}),e.jsx(P,{type:"submit",disabled:i,className:"w-full font-secondary rounded-full bg-[#43996A]",children:i?e.jsxs(e.Fragment,{children:[e.jsx(C,{className:"mr-2 h-4 w-4 animate-spin"}),"Please wait"]}):"Login"}),e.jsxs("div",{className:"text-center ",children:[e.jsx(x,{to:"/send-password-reset-link",className:"text-sm font-normal font-secondary text-[#062393] hover:text-primary transition-colors",children:"Forgot Password"}),e.jsx("br",{}),e.jsx(x,{to:"/sign-up",className:"text-sm font-normal font-secondary text-[#062393] hover:text-primary transition-colors",children:"Don't have an Account ? Create One"})]})]})]})},Q=()=>e.jsx(v,{title:"Login",children:e.jsx(O,{})});export{Q as default};
