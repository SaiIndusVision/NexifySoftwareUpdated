{"version":3,"file":"SignUpPage-sD0ajZlG.js","sources":["../../../src/features/auth/hooks/useSignUp.ts","../../../src/features/auth/schemas/signup.schema.ts","../../../src/features/auth/components/SignUpForm.tsx","../../../src/features/auth/pages/sign-up/SignUpPage.tsx"],"sourcesContent":["import { useMutation } from \"@tanstack/react-query\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { authApi } from \"../api/authApi\";\r\nimport { setCredentials } from \"../store/authSlice\";\r\nimport { DEFAULT_ROUTES } from \"../../../core/constant/routes\";\r\nimport { toast } from \"sonner\";\r\nimport { SignUpResponse } from \"../types/auth.types\";\r\nimport type { SignUpCredentials } from \"../api/authApi\"; \r\n\r\n\r\nexport const useSignUp = () => {\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n\r\n  const { mutate, isPending, error } = useMutation<\r\n  SignUpResponse,\r\n    Error,\r\n    SignUpCredentials\r\n  >({\r\n    mutationFn: authApi.SignUpUser,\r\n    onSuccess: (data) => {\r\n    //   // Store user info in Redux\r\n    //   dispatch(setCredentials({ \r\n    //     user_id: data.user_id, \r\n    //   }));\r\n\r\n      // Redirect user to correct route based on role\r\n    //   const defaultRoute = DEFAULT_ROUTES[data.user.role.name];\r\n    //   if (defaultRoute) {\r\n    //     toast.success(\"SignUp successful\");\r\n    //     navigate(defaultRoute);\r\n    //   } else {\r\n    //     toast.error(\"Invalid user role\");\r\n    //   }\r\n    console.log(data)\r\n            toast.success(\"SignUp successful, Please check your email for secret key and login !\");\r\n            navigate('/login')\r\n    },\r\n    onError: (error: Error) => {\r\n      console.log(error)\r\n      toast.error(error.message || \"SignUp failed\");\r\n    },\r\n  });\r\n\r\n  return { mutate, isLoading: isPending, error };\r\n};\r\n","import * as z from \"zod\"\r\n\r\nexport const signupSchema = z\r\n  .object({\r\n    first_name: z.string().min(1, \"First name is required\"),\r\n    last_name: z.string().min(1, \"Last name is required\"),\r\n    // email: z.string().email(\"Email is required\"),\r\n    email: z\r\n  .string()\r\n  .min(1, \"Email is required\")\r\n  .email(\"Please enter a valid email\"),\r\n\r\n    phone_number: z.string().min(6, \"Phone number is required\"),\r\n    password: z.string()\r\n    .nonempty(\"Password is required\")\r\n    .min(8, \"Password must be  8+ characters with uppercase, number, and special character\")  \r\n  .regex(/[A-Z]/, \"Password must include at least one uppercase letter\")\r\n  .regex(/[0-9]/, \"Password must include at least one number\")\r\n  .regex(/[^A-Za-z0-9]/, \"Password must include at least one special character\"),\r\n\r\n    // password: z.string().min(6, \"Password must be at least 6 characters\"),\r\n    // confirm_password: z.string().min(6, \"Confirm password is required\"),\r\n    confirm_password: z.string()\r\n    .nonempty(\"Password is required\")\r\n    .min(8, \"Password must be  8+ characters with uppercase, number, and special character\")\r\n  \r\n  .regex(/[A-Z]/, \"Password must include at least one uppercase letter\")\r\n  .regex(/[0-9]/, \"Password must include at least one number\")\r\n  .regex(/[^A-Za-z0-9]/, \"Password must include at least one special character\"),\r\n\r\n    mac_address: z.string().nullable(),\r\n    role_id: z.number(),\r\n    is_active: z.boolean(),\r\n    started_on: z.string(),\r\n  })\r\n  .refine((data) => data.password === data.confirm_password, {\r\n    message: \"Passwords do not match\",\r\n    path: [\"confirm_password\"],\r\n  });\r\n\r\nexport type SignupSchema = z.infer<typeof signupSchema>;\r\n","import React from \"react\";\r\nimport { useForm } from \"react-hook-form\";\r\n\r\nimport { zodResolver } from \"@hookform/resolvers/zod\";\r\nimport { Eye, EyeOff, Loader2 } from \"lucide-react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport {\r\n  Form,\r\n  FormControl,\r\n  FormField,\r\n  FormItem,\r\n  FormLabel,\r\n  FormMessage,\r\n} from \"@/components/ui/form\";\r\nimport PhoneInput from \"@/components/ui/phoneinput\"; // ✅ Correct for default exports\r\n\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { useSignUp } from \"../hooks/useSignUp\";\r\nimport { signupSchema, SignupSchema } from \"../schemas/signup.schema\";\r\nimport { Link } from \"react-router-dom\"; // fixed this from \"react-router\" to \"react-router-dom\"\r\n\r\nconst SignUpForm = () => {\r\n  const [showPassword, setShowPassword] = React.useState(false);\r\n  const [showConfirmPassword, setShowConfirmPassword] = React.useState(false);\r\n  const { mutate, isLoading } = useSignUp();\r\n   \r\n\r\n  const form = useForm<SignupSchema>({\r\n    resolver: zodResolver(signupSchema),\r\n    mode: \"onSubmit\",\r\n    defaultValues: {\r\n      first_name: \"\",\r\n      last_name: \"\",\r\n      email: \"\",\r\n      phone_number: \"\", // <-- now a string\r\n      password: \"\",\r\n      \r\n    confirm_password: \"\",\r\n      mac_address: null,\r\n      role_id: 1,\r\n      is_active: true,\r\n      started_on: new Date().toISOString().slice(0, 10), // format: \"YYYY-MM-DD\"\r\n    },\r\n  });\r\n\r\n  const handleSignup = (values: SignupSchema) => {\r\n    const { confirm_password, ...dataToSubmit } = values;\r\n    console.log(\"Submitted data (without confirm_password):\", dataToSubmit);\r\n    mutate(dataToSubmit);\r\n  };\r\n  \r\n\r\n  return (\r\n    <Form {...form}>\r\n       <div className=\"mb-8\">\r\n        <div className=\"text-2xl font-secondary font-bold text-[#062393]\">Hello!</div>\r\n        <div className=\"text-sm font-secondary  font-normal \">Sign Up to Get Started</div>\r\n\r\n      </div>\r\n      <form onSubmit={form.handleSubmit(handleSignup)} className=\"space-y-6\">\r\n        <div className=\"flex gap-3\">\r\n\r\n        \r\n        {/* First Name */}\r\n        <FormField\r\n          control={form.control}\r\n          name=\"first_name\"\r\n          \r\n          render={({ field }) => (\r\n            <FormItem>\r\n              {/* <FormLabel>First Name</FormLabel> */}\r\n              <FormControl>\r\n                <Input {...field} \r\n                  hasError={!!form.formState.errors.first_name}\r\n                \r\n                    className=\"rounded-full\"\r\n                placeholder=\"First Name*\" />\r\n              </FormControl>\r\n              <FormMessage />\r\n            </FormItem>\r\n          )}\r\n        />\r\n\r\n        {/* Last Name */}\r\n        <FormField\r\n          control={form.control}\r\n          name=\"last_name\"\r\n          render={({ field }) => (\r\n            <FormItem>\r\n              {/* <FormLabel>Last Name</FormLabel> */}\r\n              <FormControl>\r\n                <Input {...field} \r\n                                  hasError={!!form.formState.errors.last_name}\r\n\r\n                    className=\"rounded-full\"\r\n                placeholder=\"Last Name*\" />\r\n              </FormControl>\r\n              <FormMessage />\r\n            </FormItem>\r\n          )}\r\n        />\r\n        </div>\r\n\r\n        {/* Email */}\r\n        <FormField\r\n          control={form.control}\r\n          name=\"email\"\r\n          render={({ field }) => (\r\n            <FormItem>\r\n              {/* <FormLabel>Email</FormLabel> */}\r\n              <FormControl>\r\n                <Input\r\n                  {...field}\r\n                  type=\"email\"\r\n                  placeholder=\"Email Address*\"\r\n                  autoComplete=\"off\"\r\n                  hasError={!!form.formState.errors.email}\r\n                    className=\"rounded-full\"\r\n                />\r\n              </FormControl>\r\n              <FormMessage />\r\n            </FormItem>\r\n          )}\r\n        />\r\n\r\n\r\n        {/* <FormField\r\n          control={form.control}\r\n          name=\"phone_number\"\r\n          render={({ field }) => (\r\n            <FormItem>\r\n              <FormLabel>Phone Number</FormLabel>\r\n              <FormControl>\r\n                <Input\r\n                  {...field}\r\n                  type=\"number\"\r\n                  placeholder=\"Enter your phone number\"\r\n                  \r\n                    className=\"rounded-full\"\r\n                  onChange={(e) => field.onChange(Number(e.target.value))}\r\n                />\r\n              </FormControl>\r\n              <FormMessage />\r\n            </FormItem>\r\n          )}\r\n        /> */}\r\n        \r\n<FormField\r\n  control={form.control}\r\n  name=\"phone_number\"\r\n  render={({ field }) => (\r\n    <FormItem>\r\n      {/* <FormLabel>Phone Number</FormLabel> */}\r\n      <FormControl>\r\n        <PhoneInput\r\n          value={field.value || \"\"}\r\n          onChange={field.onChange}\r\n          hasError={!!form.formState.errors.phone_number}\r\n        />\r\n      </FormControl>\r\n      <FormMessage />\r\n    </FormItem>\r\n  )}\r\n/>\r\n\r\n        {/* Password */}\r\n        <FormField\r\n          control={form.control}\r\n          name=\"password\"\r\n          render={({ field }) => (\r\n            <FormItem>\r\n              {/* <FormLabel>Password</FormLabel> */}\r\n              <FormControl>\r\n                <div className=\"relative\">\r\n                  <Input\r\n                    {...field}\r\n                    type={showPassword ? \"text\" : \"password\"}\r\n                    placeholder=\"Password*\"\r\n                    autoComplete=\"off\"\r\n                    hasError={!!form.formState.errors.password}\r\n                    className=\"rounded-full\"\r\n                  />\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"absolute inset-y-0 right-0 pr-3 flex items-center hover:text-accent-foreground\"\r\n                    onClick={() => setShowPassword(!showPassword)}\r\n                  >\r\n                    {showPassword ? (\r\n                      <EyeOff className=\"h-5 w-5 text-muted-foreground\" />\r\n                    ) : (\r\n                      <Eye className=\"h-5 w-5 text-muted-foreground\" />\r\n                    )}\r\n                  </button>\r\n                </div>\r\n              </FormControl>\r\n              <FormMessage />\r\n            </FormItem>\r\n          )}\r\n        />\r\n\r\n         {/* Confirm Password */}\r\n         <FormField\r\n          control={form.control}\r\n          name=\"confirm_password\"\r\n          rules={{\r\n            required: \"Please confirm your password\",\r\n            validate: (value) =>\r\n              value === form.getValues(\"password\") || \"Passwords do not match\",\r\n          }}\r\n          render={({ field }) => (\r\n            <FormItem>\r\n              {/* <FormLabel>Password</FormLabel> */}\r\n              <FormControl>\r\n                <div className=\"relative\">\r\n                  <Input\r\n                    {...field}\r\n                    type={showConfirmPassword ? \"text\" : \"password\"}\r\n                    placeholder=\"Confirm Password*\"\r\n                    autoComplete=\"off\"\r\n                    hasError={!!form.formState.errors.confirm_password}\r\n                    className=\"rounded-full\"\r\n                  />\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"absolute inset-y-0 right-0 pr-3 flex items-center hover:text-accent-foreground\"\r\n                    onClick={() => setShowConfirmPassword(!showConfirmPassword)}\r\n                  >\r\n                    {showConfirmPassword ? (\r\n                      <EyeOff className=\"h-5 w-5 text-muted-foreground\" />\r\n                    ) : (\r\n                      <Eye className=\"h-5 w-5 text-muted-foreground\" />\r\n                    )}\r\n                  </button>\r\n                </div>\r\n              </FormControl>\r\n              <FormMessage />\r\n            </FormItem>\r\n          )}\r\n        />\r\n\r\n\r\n        <Button type=\"submit\" disabled={isLoading} className=\"w-full rounded-full\">\r\n          {isLoading ? (\r\n            <>\r\n              <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\r\n              Please wait\r\n            </>\r\n          ) : (\r\n            \"Sign Up\"\r\n          )}\r\n        </Button>\r\n\r\n\r\n        <div className=\"text-center\">\r\n          <Link\r\n            to=\"/login\"\r\n            className=\"text-sm font-normal font-secondary text-[#062393] hover:text-primary transition-colors\"\r\n       \r\n            // className=\"text-sm text-muted-foreground hover:text-primary transition-colors\"\r\n          >\r\n            Already registered? Login here\r\n          </Link>\r\n        </div>\r\n      </form>\r\n    </Form>\r\n  );\r\n};\r\n\r\nexport default SignUpForm;\r\n","import AuthLayout from \"../../components/AuthLayout\";\r\nimport SignUpForm from \"../../components/SignUpForm\";\r\n\r\nconst SignUpPage = () => {\r\n  return (\r\n    <AuthLayout title=\"Sign Up\">\r\n      <SignUpForm />\r\n    </AuthLayout>\r\n  );\r\n};\r\n\r\nexport default SignUpPage;\r\n"],"names":["useSignUp","useDispatch","navigate","useNavigate","mutate","isPending","error","useMutation","authApi","data","toast","signupSchema","z.object","z.string","z.number","z.boolean","SignUpForm","showPassword","setShowPassword","React","showConfirmPassword","setShowConfirmPassword","isLoading","form","useForm","zodResolver","handleSignup","values","confirm_password","dataToSubmit","jsxs","Form","jsx","FormField","field","FormItem","FormControl","Input","FormMessage","PhoneInput","EyeOff","Eye","value","Button","Fragment","Loader2","Link","SignUpPage","AuthLayout"],"mappings":"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"}