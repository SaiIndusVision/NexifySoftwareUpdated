import{j as n}from"./mui-BFA6lQrI.js";import{u as P,D as R}from"./useDynamicPagination-CENifVjL.js";import{r as s}from"./react-core-CQlor4TK.js";import{u as T}from"./useFilterApi-CeY-s8Rk.js";import{i as I,f as x,u as g,j as b,A as h,B as j}from"./index-Dekx5HmU.js";import{u as D}from"./getUserFromRedux-DcuAKq2y.js";import"./data-utils-7BzZlo9U.js";import"./state-management-hQ1z8sur.js";import"./ui-utils-DmSiVVjI.js";import"./radix-BHg8RD76.js";import"./form-tools-D5DSvKKH.js";const N=i=>[{key:"select",id:"select",name:"Select",className:"min-w-0 p-2",cell:(a,e)=>n.jsx("input",{type:"checkbox",checked:a,onChange:d=>i(e.partner_order_id,d.target.checked),className:"h-5 w-5 cursor-pointer rounded-sm border-2 transition-all duration-300",style:{accentColor:"#E53888",display:"inline-block",verticalAlign:"middle",position:"relative"}})},{key:"nium_order_id",id:"nium_order_id",name:"Nium ID"},{key:"partner_order_id",id:"partner_order_id",name:"Partner ID"},{key:"createdAt",id:"createdAt",name:"Order Date"},{key:"customer_pan",id:"customer_pan",name:"Customer PAN"},{key:"transaction_type",id:"transaction_type",name:"Transaction Type",cell:(a,e)=>n.jsx("span",{children:e.transaction_type.text})},{key:"purpose_type",id:"purpose_type",name:"Purpose Type",cell:(a,e)=>n.jsx("span",{children:e.purpose_type.text})}],w=(i,a,e=!0)=>{const[d,f]=s.useState(null),[p,t]=s.useState(e),[m,o]=s.useState(null),c=s.useCallback(async y=>{t(!0),o(null);try{const r=I(i),{data:l}=await x.get(r,{params:y||a});f(l)}catch(r){const l=r instanceof Error?r.message:"An unknown error occurred";g.error("Error Fetching Data",{description:l}),o(l)}finally{t(!1)}},[i,a]);return s.useEffect(()=>{e&&c()},[c,e]),{data:d,loading:p,error:m,fetchData:c}},M=()=>{const{setTitle:i}=b(),{getUserHashedKey:a}=D(),e=a();s.useEffect(()=>{i("Assign")},[i]);const{data:d,loading:f,fetchData:p}=w("CHECKER.ASSIGN.LIST"),[t,m]=s.useState([]),[o,c]=s.useState(!1),y=!1,r=P({endpoint:h.CHECKER.ASSIGN.LIST,initialPageSize:10,dataPath:"transactions",totalRecordsPath:"totalRecords"}),l=T({endpoint:h.CHECKER.ASSIGN.LIST,baseQueryParams:{}}),C=(u,S)=>{m(_=>S?[..._,u]:_.filter(A=>A!==u))},E=async()=>{if(t.length===0){g.error("Please select at least one transaction");return}c(!0);try{await x.post(h.CHECKER.ASSIGN.TAKE_REQUEST,{orderIds:t,clientId:e})&&(g.success(`Successfully assigned ${t.length} transaction(s)`),p()),m([])}catch{g.error("Failed to take request. Please try again.")}finally{c(!1)}},k=N(C);return s.useEffect(()=>{},[p,y,r]),n.jsxs("div",{className:"flex flex-col",children:[n.jsx(R,{columns:k,data:d??[],defaultSortColumn:"nium_order_id",defaultSortDirection:"asc",loading:l.loading||r.loading||o||f,paginationMode:"static",onPageChange:async(u,S)=>[],totalRecords:r.totalRecords,filter:{filterOption:!0,mode:"static",rederFilerOptions:{search:!0},dynamicCallbacks:void 0}}),n.jsxs("div",{className:"w-full  flex flex-col items-center justify-start gap-3",children:[n.jsxs("div",{className:"text-sm text-gray-500",children:[t.length," transaction",t.length!==1?"s":""," selected"]}),n.jsx(j,{onClick:E,disabled:t.length===0||o,className:"border",children:o?"Processing...":`Take Request${t.length!==1?"s":""}`})]})]})};export{M as default};
